<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="teachergaming-desk">TeacherGaming Desk</h1>

<p>This documentation covers the technical details needed by developers aiming to integrate TeacherGaming Desk in their games or other applications.</p>

<p>The TeacherGaming Desk is a classroom toolbox designed to make game-based learning accessible to everyone.  It combinines a portfolio of games with pedagogical support and real-time analytics.</p>

<p>From a technical point of view TeacherGaming Desk is made of three things.</p>

<ol>
<li>A web based platform ( <a href="https://desk.teachergaming.com">https://desk.teachergaming.com</a> ) for teachers, administrators and game developers called Teachergaming Desk that implements the following functionalities for its users.

<ul>
<li>Teachers

<ul>
<li>Lesson plans for using games in education</li>
<li>Analytics information about student skill progress and real-time information about what students are doing in a game</li>
<li>Managing students and classes</li>
<li>Viewing screenshots and other creations students send to Creatubbles</li>
</ul></li>
<li>Administrators

<ul>
<li>Manage subscriptions</li>
<li>Manage teachers</li>
</ul></li>
<li>Developers

<ul>
<li>Manage games and their information</li>
<li>Define the analytics for a game by managing skills, events and activities</li>
<li>Generate SDKs for games</li>
<li>Create lessons for games</li>
<li>Provide oAuth single sign on support for using the TeacherGaming Desk login in other web based applications</li>
</ul></li>
</ul></li>
<li>TeacherGaming App ( <a href="https://play.google.com/store/apps/details?id=com.teachergaming.com">Android</a>, <a href="https://itunes.apple.com/us/app/teachergaming/id1221257680">iOS</a> )

<ul>
<li>Download games</li>
<li>Launch games

<ul>
<li>with automatic TeacherGaming Desk student login</li>
</ul></li>
</ul></li>
<li>Games with TeacherGaming Desk integration

<ul>
<li>Send analytics to TeacherGaming Desk</li>
<li>Send screenshots and other creations to Creatubbles</li>
</ul></li>
</ol>

          <h1 id="general-sdk-information">General SDK Information</h1>

<p>In this document and in the code the SDK for integrating the analytics is often called TGA SDK for short.</p>

<p>This part of the document is written for game developers that are going to integrate TeacherGaming Desk analytics into their games. It describes on a general level how to do the integration. Integration can be done either by using a ready-made SDK for your platform or manually by using the HTTP API.</p>

<p>More detailed information is available in the documentation for the different SDKs and the HTTP API documentation. See the links on the left.</p>

<h2 id="student-id-and-class-id">Student id and Class id</h2>

<p>Students are identified in TGA by their class and student ids. These are used instead of real names or similar in order to prevent outsiders (anyone except their teachers or parents etc.) from identifying individual students in the system. The class id is a system-wide unique generated alphanumeric identifier that identifies a group of students (usually a class). The student id is an alphanumeric identifier that is unique within a class, and is manually set either by a teacher in the web interface or by the student on first login if automatic generation of students has been allowed for that class.</p>

<p>TeacherGaming Desk analytics (TGA) requires the game to send a class id and a student id for each student playing the game to assign data to the right student. This means that students need to login before data can be sent, except for anonymous event data.</p>

<p>Logging in can be done through the TeacherGaming app or in the game. If users authenticate in the game you will need to add a UI where the student can type in a class id and a student id. Our Unity C# SDK has a ready-made UI you can use if you are developing on Unity.</p>

<p>You should not save the class and student ids in your game. The student should need to login separately every time the app is started either through the TeacherGaming app or in the game UI.</p>

<h3 id="automatically-logging-in-from-teachergaming-app">Automatically logging in from TeacherGaming app</h3>

<p>When the user has logged in to TeacherGaming app and launches your game the TeacherGaming app passes the login information to your game to allow your game to log in automatically as it is lauched (or brought back to foreground). On Android this is done by using Intent (when app is not already running) and Broadcast (when app is running) parameters. On iOS this is done using an URI scheme. We are planning to change Android to use the URI scheme as well in the future (the Unity SDK already supports it). On desktop platforms we pass the URI as a command line argument to the application.</p>

<p>The SDKs do the handling of these parameters automatically. When using an SDK all you need to do is listen to a callback (see the platform specific SDK documentation for how to do this) and react appropriately. If you are using the HTTP API you need to do the parameter handling yourself (see the HTTP API documentation and TeacherGaming app Android Intent login documentation).</p>

<p>When the student has logged in via TeacherGaming app you should not give the user the option to logout or to login as different student inside the game. Changing the student should only be done via the TeacherGaming app in this case. It is good if you still have the UI to show the class and student ids but you can leave it out if you wish. This can be the same UI you use to login inside the game just having the input fields and buttons in a disabled state disabled for example.</p>

<h4 id="testing-automatic-login-through-teachergamning-app">Testing automatic login through TeacherGamning App</h4>

<ol>
<li>Search for app called TeacherGaming on Play or App store. Install the app and launch it.</li>
<li>Press “LOGIN TO ANALYTICS” button at the top of the screen</li>
<li>Tap 10 times TG logo at the top of the screen and a new menu will appear</li>
<li>In the new menu input your game’s package name and class id and student id</li>
<li>Press “Launch”
Your game should now run and a popup should inform you about the login result.</li>
</ol>

<h4 id="testing-automatic-login-on-mobile-without-teachergaming-app">Testing automatic login on mobile without TeacherGaming app</h4>
<pre class="highlight plaintext"><code>URI:
&lt;your bundle identifier&gt;://?classid=&lt;class id&gt;&amp;studentid=&lt;student id&gt;&amp;command=&lt;login/logout&gt;

Example (in html file):

&lt;a href = "com.fivemoreminutes.switchandglitch://?classid=h1xme&amp;studentid=student1&amp;command=login"&gt; Login h1xme/student1 &lt;/a&gt;

</code></pre>
<p>Create a html file with links according to the URI scheme or input the URI in the device browser address bar.</p>

<h4 id="testing-automatic-login-on-desktop-without-teachergaming-app">Testing automatic login on desktop without TeacherGaming app</h4>
<pre class="highlight plaintext"><code>Desktop command line examples:

“Switch &amp; Glitch.exe” “com.fivemoreminutes.switchandglitch://?classid=h1xme&amp;studentid=student1&amp;command=login”

“Switch &amp; Glitch.exe” “?classid=h1xme&amp;studentid=student1&amp;command=login”

</code></pre>
<p>On desktop platforms you should test the automatic login by giving the URI on the right as a command line parameter when starting your game.</p>

<p>Replace &lt;your bundle identifier&gt; with your bundle identifier (f.e. com.teachergaming.switchandglitch) &lt;class id&gt; with a class id and &lt;student id&gt; with a student id and choose login or logout as the command. Note that on desktop you can leave the &lt;your bundle identifier&gt;:// part out in case you don’t have a bundle identifier defined. You can also leave the classid=&lt;class id&gt;&amp;studentid=&lt;student id&gt;&amp; part out if you have logout as the command. Note that you should never leave out the ? character. Note that the parameter contains special characters, so remember to put it in &ldquo;&rdquo;.</p>

<h3 id="creating-your-own-ui-for-in-game-login">Creating your own UI for in-game login</h3>

<p>For manually logging in to TGA the student needs to be able to input a class id and a student id. A good place for this UI is for example in a settings menu, or somewhere in the main menu. Usually two input fields with OK and Cancel options is enough. You can also have a Logout button to logout of TGA. Both the class id and student id fields should be either lowercase or uppercase only, not mixed case. In the system the class id and student id are not case sensitive. Uppercase only can be used to make it easier for young children to type the ids.</p>

<h4 id="login-ui-examples">Login UI examples</h4>

<table>
<tr>
    <td width="33%">
        <img src="images/integrations/unitycsharp/image6.png"/><br>
        Unity C# SDK built-in login UI
    </td>
    <td width="33%">
        <img src="images/integrations/general/image4.png"/><br>
        Switch & Glitch manual login
    </td>
    <td width="33%">
        <img src="images/integrations/general/image6.png"/><br>
        Switch & Glitch logged in via TeacherGaming app
    </td>
</tr>
</table>

<h2 id="save-games-user-profiles-and-tga-login">Save games, user profiles and tga login</h2>

<p>If your game has different user profiles for different players, you should tie each tga login to a different user profile. Even if you don’t have user profiles otherwise, it is advisable to tie player progress to TGA login.</p>

<p>Note that when resuming the game and switching profiles, you should log the current user out and switch the profile. This can happen for example when user changes logged in user in TeacherGaming App and launches your game again and your game was already running in the background.</p>

<h2 id="sending-events">Sending events</h2>

<p>The events that have been defined in TeacherGaming Desk website are automatically generated to the SDK and can be used to send data from the game to TeacherGaming Desk. In this document just a general overview with pseudocode is given. See the platform specific SDK documentation for more detailed information. You don’t need to check if the user is logged in to TGA before sending events. The SDK will automatically check inside the function calls for this.</p>

<h3 id="sending-events-with-duration">Sending events with duration</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Tracking an event with duration</span>
<span class="c1">// Level Start</span>
<span class="n">TGASDKSomeGame</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">LevelCompleted</span><span class="p">.</span><span class="nf">Start</span><span class="p">();</span>

<span class="c1">// Within level, when player gets score</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">SomeGame</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">LevelCompleted</span><span class="p">.</span><span class="n">Score</span> <span class="p">+=</span> <span class="m">1</span>

<span class="c1">// At the end of the level</span>
<span class="n">TGASDKSomeGame</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">LevelCompleted</span><span class="p">.</span><span class="nf">Send</span><span class="p">();</span>
</code></pre>
<p>Our SDK can automatically count time for an event and append duration to sent data. You can modify any additional data inside the event before you send it.
To start the event, call TGASDK.Event.&lt;EventName&gt;.Start().
You can gather all the needed data for the event before you send it using TGASDK.Event.&lt;EventName&gt;.Current.&lt;DataParameter&gt;
To send the event, call TGASDK.Event.&lt;EventName&gt;.Send()</p>

<h3 id="sending-events-without-duration">Sending events without duration</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Sending an event without tracking for duration</span>
<span class="n">TGASDKSomeGame</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">ItemCrafted</span><span class="p">.</span><span class="nf">Send</span><span class="p">(</span><span class="s">"item1"</span><span class="p">);</span>
</code></pre>
<p>If the event is something for which it does not make sense to track a duration you can call TGASDK.Event.&lt;EventName&gt;.Send(&hellip;) with event data as parameters to send the event directly.</p>

<h2 id="updating-state">Updating state</h2>

<p>Updating state can be done using one of three function calls</p>

<ul>
<li>TGASDK.TGA.UpdateUserState(string state)

<ul>
<li>This sets the state showing below student name in teacher dashboard. It also resets detailed state showing below this state, if there was any.</li>
</ul></li>
<li>TGASDK.TGA.UpdateUserState(string state, string detailedState)

<ul>
<li>This sets the state showing below student name in teacher dashboard and detailed state below it.</li>
</ul></li>
<li>TGASDK.TGA.UpdateUserStateDetailedOnly(string stateDetailed)

<ul>
<li>This sets the detailed state below main state and does not reset the main state. You can use this to for example update round numbers or other live data happening in current state of your game.</li>
</ul></li>
</ul>

<p>You can keep the state update calls in your game and don’t need to check if user is logged in to TGA, we will automatically check inside the function calls if player is currently logged in to TGA and send the state update only if so.</p>

<h3 id="state-examples">State examples</h3>
<pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"In Main Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"In Settings Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Singleplayer Game"</span><span class="p">,</span> <span class="s">"Tutorial Level 4"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="c1">// When game begun</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Multiplayer Game"</span><span class="p">);</span>
<span class="c1">// When round changed</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserStateDetailedOnly</span><span class="p">(</span><span class="s">"Round 2"</span><span class="p">);</span>
</code></pre>
<table>
<tr>
    <td width="20%"> <img src="images/integrations/unitycsharp/image5.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image4.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image2.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image1.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image3.png"/> </td>
</tr>
<tr>
    <td><small>Default state for logged-in student </small></td>
    <td><small>Student is in main menu </small></td>
    <td><small>Student is in settings menu</small></td>
    <td><small>Student is playing singleplayer game, Tutorial Level 4 has been passed for detailed state</small></td>
    <td><small>Student is playing multiplayer game, Round number is being passed to detailed state when round changes</small></td>
</tr>
</table>

          <h1 id="unity-c-sdk">Unity C# SDK</h1>

<h2 id="general">General</h2>

<p>This document describes the specifics of integrating TGA to your game using the TGA Unity C# SDK. For general integration information and links to other SDK documents see the general SDK instructions.</p>

<h3 id="requirements">Requirements</h3>

<p>Our current SDK requires Unity 4.0.0f7 or later. If you need an SDK for an earlier version of Unity please contact us.</p>

<h3 id="first-steps">First steps</h3>

<ul>
<li>TeacherGaming will send you a .unitypackage with the latest SDK and assets.</li>
<li>Import the package by selecting “Assets -&gt; Import package -&gt; Custom package” in Unity.</li>
<li>Attach the SDK script to a GameObject that is not deleted during the game. The script is located in “TGAGameSpecific/” folder and is named TGASDK<yourgamenamehere>.cs</li>
<li>Updating the SDK and assets can usually be done by simply importing new package and updated files will automatically be detected.

<ul>
<li>If you are having problems and would like to try a complete reimport of the SDK, you can delete the following directories &amp; files before importing the package

<ul>
<li>TGA</li>
<li>TGAGameSpecific</li>
<li>StreamingAssets/TGA</li>
<li>Plugins/Android/AndroidManifest.xml</li>
</ul></li>
<li>In older versions of the SDK you needed to manually attach the CreatubblesManager script to a GameObject. You no longer need to do this and should remove it if you have attached it previously.</li>
</ul></li>
</ul>

<h3 id="notes">Notes</h3>

<p>Your game specific SDK file is called TGASDK<yourgamenamehere>.cs. Class inside that file is called TGASDK<yourgamenamehere>. To improve readability, we have not added <yourgamenamehere> for each method call in this document, we are mentioning TGASDK and you should add your game name after each TGASDK call to make it correct.</p>

<h2 id="student-login">Student login</h2>

<p>Logging in can be done through the TeacherGaming app (Android only at the moment) or in game. If users authenticate in game you will need to add a menu where user can type in a classid and a studentid. Authentication must be done before data can be sent.</p>

<h3 id="automatically-logging-in-with-teachergaming-app">Automatically logging in with TeacherGaming App</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Automatically logging in with TeacherGaming App</span>
<span class="c1">// Login status delegate &amp; event (in TGASDK.TGA)</span>
<span class="k">public</span> <span class="k">delegate</span> <span class="k">void</span> <span class="nf">LoginStatusListener</span><span class="p">(</span><span class="kt">bool</span> <span class="n">isLoggedIn</span><span class="p">);</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">event</span> <span class="n">LoginStatusListener</span> <span class="n">OnLoginStatusChanged</span><span class="p">;</span>
</code></pre><pre class="highlight xml tab-xml"><code><span class="c">&lt;!-- Assets/Plugins/Android/AndroidManifest.xml --&gt;</span>
<span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;manifest</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span> <span class="na">package=</span><span class="s">"com.unity3d.player"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;application</span> <span class="na">android:icon=</span><span class="s">"@drawable/app_icon"</span> <span class="na">android:label=</span><span class="s">"@string/app_name"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">"com.unity3d.player.UnityPlayerActivity"</span>
              <span class="na">android:label=</span><span class="s">"@string/app_name"</span>
              <span class="na">android:configChanges=</span><span class="s">"fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;intent-filter&gt;</span>
            <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"android.intent.action.MAIN"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"android.intent.category.LAUNCHER"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/intent-filter&gt;</span>
    <span class="nt">&lt;/activity&gt;</span>

    <span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">"com.teachergaming.tga.TGAAndroidUriSchemeActivity"</span>
            <span class="na">android:label=</span><span class="s">"@string/app_name"</span>
            <span class="na">android:launchMode=</span><span class="s">"singleTop"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;intent-filter&gt;</span>
            <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"android.intent.action.VIEW"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"android.intent.category.DEFAULT"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"android.intent.category.BROWSABLE"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;data</span> <span class="na">android:scheme=</span><span class="s">"YOUR.BUNDLEIDENTIFIER.HERE"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- REPLACE WITH YOUR GAME'S ANDROID APP BUNDLE IDENTIFIER --&gt;</span>
        <span class="nt">&lt;/intent-filter&gt;</span>
    <span class="nt">&lt;/activity&gt;</span>

    <span class="nt">&lt;receiver</span>
        <span class="na">android:name=</span><span class="s">"com.teachergaming.tgareceiver.TGABroadcastReceiver"</span>
        <span class="na">android:enabled=</span><span class="s">"true"</span>
        <span class="na">android:exported=</span><span class="s">"true"</span> <span class="nt">&gt;</span>
        <span class="nt">&lt;intent-filter&gt;</span>
            <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"com.teachergaming.com.TGAbroadcast"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/intent-filter&gt;</span>
    <span class="nt">&lt;/receiver&gt;</span>

  <span class="nt">&lt;/application&gt;</span>
<span class="nt">&lt;/manifest&gt;</span> 
</code></pre><pre class="highlight plaintext"><code>You can test automatic login using the following URI format
&lt;your bundle identifier&gt;://?classid=&lt;class id&gt;&amp;studentid=&lt;student id&gt;&amp;command=&lt;login/logout&gt;
</code></pre>
<p>Logging in via TeacherGaming App is automatically handled by the SDK. You can listen to the TGASDK.TGA.OnLoginStatusChanged C# event to get notified when the login status changes. The event gives you one boolean parameter that is true if a student logged in and false if the current student logged out. The event is implemented using the C# delegate &amp; event system.</p>

<p>You can use the TGASDK.TGA.LoggedInExternally() to check if the user logged in using the TeacherGaming App.</p>

<p>Note for Android! In future versions of TeacherGaming App we are moving to use URI schemes to forward the login parameters to games on Android, like we already do on iOS. For this to work you need to specify your app&rsquo;s bundle id for the com.teachergaming.tga.TGAAndroidUriSchemeActivity activity in the AndroidManifest.xml file in Assets/Plugins/Android.</p>

<p>On Android and iOS you can test the uri scheme login by creating a .html file with links according to the URI scheme and opening it in your device browser and clicking on the links.</p>

<p>On desktop platforms you should test the automatic login by giving the uri as a command line parameter when starting your game. See https://docs.google.com/document/d/1nEJ5EGwO6JxTTmJGixvxEcBb0VhpMN7sEfOjGHY4JkI/edit#heading=h.1u1ow8hobpr for details.</p>

<h3 id="built-in-login-menu">Built-in login menu</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Built-in login menu</span>
<span class="c1">// Using the built-in login menu</span>

<span class="c1">// First check that not already logged in externally</span>
<span class="k">if</span> <span class="p">(!</span><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">LoggedInExternally</span><span class="p">())</span>
<span class="p">{</span>
    <span class="c1">// Then show the login UI</span>
    <span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">CreateLoginPanel</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
<p>The TGA Unity C# SDK can create a ready made UI that has all the authentication functionality built in. See the code example on the right on how to use it.
A login dialog will be created that looks like this (without the blue background)</p>

<p><img src="images/integrations/unitycsharp/image6.png" title="UnityCSharp Login Example" alt="UnityCSharp Login Example" /></p>

<p>This dialog will inform user if the login failed or succeeded. As with login via TeacherGaming App you can listen to the TGASDK.TGA.OnLoginStatusChanged event to get notified when the login status changes.</p>

<h3 id="handling-subscription-required">Handling subscription required</h3>

<p>You can define the compile time symbol TGA_SUBSCRIPTION_REQUIRED to make the login menu require a subscription. If the symbol is defined you cannot login if you don&rsquo;t have an active subscription and you cannot close the login menu without logging in. Pressing X in the top-right corner will quit the application by calling Application.Quit(). You can also supply your own function for quitting as a parameter for TGASDK.TGA.CreateLoginPanel() for example if you need to bypass your Monobehaviour.OnApplicationQuit handler that calls Application.CancelQuit.</p>

<p>When TGA_SUBSCRIPTION_REQUIRED is defined you should show the login window when the game app is started (main menu or equivalent).</p>

<h3 id="custom-login-menu">Custom login menu</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Custom login menu</span>
<span class="c1">// Logging in from code</span>

<span class="c1">// Create new Auth object and start authentication</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="n">TGAAuth</span> <span class="n">tgaAuth</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">TGAAuth</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="n">TGAAuth</span><span class="p">.</span><span class="nf">AuthUser</span><span class="p">(</span><span class="k">class</span><span class="nc">ID</span><span class="p">,</span> <span class="n">studentID</span><span class="p">));</span>

<span class="c1">// Wait for auth result</span>
<span class="k">yield</span> <span class="k">return</span> <span class="n">tgaAuth</span><span class="p">.</span><span class="n">authResult</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="n">tgaAuth</span><span class="p">.</span><span class="n">authResult</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="s">"true"</span><span class="p">))</span>
<span class="p">{</span>
    <span class="c1">// Authentication succeeded (classid &amp; studentid we’re correct)</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="c1">// Authentication failed (classid &amp; studentid we’re not correct)</span>
<span class="p">}</span>
</code></pre>
<p>Note: If a student has logged in externally (using TeacherGaming App) your custom login menu should not allow changing the login nor logging out. You can check if the user has logged in externally using TGASDK.TGA.LoggedInExternally(). It is recommended you still have the UI to show the class and student ids. This can be the same UI you use to login inside the game just having the input fields and buttons in a disabled state disabled for example.</p>

<p>If you choose to create your own login menu you need to pass the class id and student id to the auth process. From a Monobehaviour script you need to run a coroutine with the code on the right.</p>

<p>You can also listen to the TGASDK.TGA.OnLoginStatusChanged event to get notified when the login status changes.</p>

<h2 id="sending-events">Sending events</h2>

<p>The events that have been defined in TeacherGaming Desk website are generated to the SDK and can be used to send data from the game to Desk. All the events have their own inner class inside TGA<yourgamename>.Event with a property for each event parameter and functions to start and send the event.</p>

<h3 id="sending-events-with-duration">Sending events with duration</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// This is an example with our game Switch N’ Glitch.</span>

<span class="c1">/// When the player enters a singleplayer level, in our StartGame() function </span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="nf">Start</span><span class="p">();</span> 

<span class="c1">// And when the player has completed the level:</span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">LevelId</span> <span class="p">=</span> <span class="n">Client</span><span class="p">.</span><span class="n">UIActiveClient</span><span class="p">.</span><span class="n">LocalGame</span><span class="p">.</span><span class="n">GameBoard</span><span class="p">.</span><span class="n">PrefabPath</span><span class="p">;</span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">FailedCommandCount</span> <span class="p">=</span> <span class="n">player</span><span class="p">.</span><span class="n">failedTileCount</span><span class="p">;</span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">CommitCount</span> <span class="p">=</span> <span class="n">player</span><span class="p">.</span><span class="n">totalCommitCount</span><span class="p">;</span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">OptimalCommitsForLevel</span> <span class="p">=</span> <span class="n">Client</span><span class="p">.</span><span class="n">UIActiveClient</span><span class="p">.</span><span class="n">LocalGame</span><span class="p">.</span><span class="n">GameBoard</span><span class="p">.</span><span class="n">programExecutionsGoal</span><span class="p">;</span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">MetagelCollected</span> <span class="p">=</span> <span class="n">player</span><span class="p">.</span><span class="n">playerScore</span><span class="p">;</span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="nf">Send</span><span class="p">();</span>
</code></pre>
<p>This is useful for events that have a clear start and end times and as such a duration. Our SDK can automatically count time from beginning to end and append duration to sent data. You can also modify any additional data inside the event before you send it.
To start an event, call TGASDK.Event.<EventName>.Start()
You can change additional data inside the event before you send it. All data for the started event can be changed using TGASDK.Event.<EventName>.Current.<ParameterName>
To send the event, call TGASDK.Event.<EventName>.Send() without parameters.</p>

<h3 id="sending-events-without-duration">Sending events without duration</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Sending an event without duration</span>

<span class="c1">// This example is from KerbalEdu</span>
<span class="n">TGASDKKerbalEdu</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SituationChange</span><span class="p">.</span><span class="nf">Send</span><span class="p">(</span><span class="n">FlightGlobals</span><span class="p">.</span><span class="n">ActiveVessel</span><span class="p">.</span><span class="n">mainBody</span><span class="p">.</span><span class="n">bodyName</span><span class="p">,</span> <span class="n">FlightGlobals</span><span class="p">.</span><span class="n">ActiveVessel</span><span class="p">.</span><span class="n">situation</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(),</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">FlightGlobals</span><span class="p">.</span><span class="n">ActiveVessel</span><span class="p">.</span><span class="n">totalMass</span><span class="p">);</span>
</code></pre>
<p>You can call TGASDK.Event.<EventName>.Send(&hellip;) with event data as parameters to send an event immediately, without tracking for duration.</p>

<h2 id="updating-state">Updating state</h2>

<p>Updating state can be done using one of three function calls</p>

<ul>
<li>TGASDK.TGA.UpdateUserState(string state)

<ul>
<li>This sets the state showing below student name in teacher dashboard. It also resets detailed state showing below this state, if there was any.</li>
</ul></li>
<li>TGASDK.TGA.UpdateUserState(string state, string detailedState)

<ul>
<li>This sets the state showing below student name in teacher dashboard and detailed state below it.</li>
</ul></li>
<li>TGASDK.TGA.UpdateUserStateDetailedOnly(string stateDetailed)

<ul>
<li>This sets the detailed state below main state and does not reset the main state. You can use this to for ex. Update round numbers or other live data happening in current state of your game.</li>
</ul></li>
</ul>

<p>You can keep the state update calls in your game and don’t need to check if user is logged in to TGA, we will automatically check inside the function calls if player is currently authenticated to TGA and send the state update only if so.</p>

<h3 id="state-examples">State examples</h3>
<pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"In Main Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"In Settings Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Singleplayer Game"</span><span class="p">,</span> <span class="s">"Tutorial Level 4"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="c1">// When game begun</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Multiplayer Game"</span><span class="p">);</span>
<span class="c1">// When round changed</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserStateDetailedOnly</span><span class="p">(</span><span class="s">"Round 2"</span><span class="p">);</span>
</code></pre>
<table>
<tr>
    <td width="20%"> <img src="images/integrations/unitycsharp/image5.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image4.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image2.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image1.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image3.png"/> </td>
</tr>
<tr>
    <td><small>Default state for logged-in student </small></td>
    <td><small>Student is in main menu </small></td>
    <td><small>Student is in settings menu</small></td>
    <td><small>Student is playing singleplayer game, Tutorial Level 4 has been passed for detailed state</small></td>
    <td><small>Student is playing multiplayer game, Round number is being passed to detailed state when round changes</small></td>
</tr>
</table>

<h2 id="creatubbles">Creatubbles</h2>

<p>Creatubbles integration can be used to take a screenshot of the game and send it to TGA and Creatubbles web page. To use this feature the user needs to be logged in to TGA and the CreatubblesManager script needs to be attached to a gameobject as explained in the FIRST STEPS section.</p>

<h3 id="usage">Usage</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">/// Creatubbles</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">ScreenShotToCreatubbles</span><span class="p">();</span>
</code></pre>
<p>To send a screenshot to TGA you can simply call TGASDK.TGA.ScreenShotToCreatubbles(). This will take a screenshot and open a UI that shows you the image that would be sent and where you can enter a description for the screenshot.
<img src="images/integrations/unitycsharp/image7.png" title="Creatubbles UI" alt="Creatubbles UI" /></p>

<p>For example you can create a simple button to send the screenshot and show it in your in-game UI. There is a camera texture in the “TGA/Resources/Graphics/” folder that you can use with the button if you wish.</p>

<h2 id="getting-information">Getting information</h2>

<h3 id="general-information">General information</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// General information</span>

<span class="c1">// Call example: TGASDK.TGA.IsUserLoggedIn()</span>

<span class="c1">// Login information</span>

<span class="c1">// Returns true if logged into TGA, otherwise false.</span>
<span class="kt">bool</span> <span class="nf">IsUserLoggedIn</span><span class="p">()</span>

<span class="c1">// Returns true if logged into TGA via broadcast (TGA App), otherwise false.</span>
<span class="kt">bool</span> <span class="nf">LoggedInExternally</span><span class="p">()</span>

<span class="c1">// Returns the student ID used for login.</span>
<span class="kt">string</span> <span class="nf">GetStudentId</span><span class="p">()</span>

<span class="c1">// Returns the class ID used for login.</span>
<span class="kt">string</span> <span class="nf">GetClassId</span><span class="p">()</span>
</code></pre>
<p>Here (on the right) are some functions you can use to get status information about TGA. All of these are static functions of TGASDK.TGA.</p>

<h3 id="subscription-information">Subscription information</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Subscription information</span>

<span class="c1">// Returns true if game subscription has expired, otherwise false.</span>
<span class="kt">bool</span> <span class="nf">SubscriptionExpired</span><span class="p">()</span>

<span class="c1">// Returns the message that should be shown to user if the subscription has expired</span>
<span class="kt">string</span> <span class="nf">SubscriptionExpiredMessage</span><span class="p">()</span>
</code></pre>
<p>These functions can be used to query if there is a valid subscription for the game. For testing the subscription, there are these two classes: Class h1xme never has subscription expired. Class h1xjr always has subscription expired. Both of these classes have student self-signup enabled so user can login with any studentid for testing.</p>

          <h1 id="c-sdk">C++ SDK</h1>

<h2 id="general">General</h2>

<p>This document describes the specifics of integrating Teachergaming Desk to your game using the TGA C++ SDK. For general integration information and links to other SDK documents see the general SDK information.</p>

<h2 id="requirements">Requirements</h2>

<p>Our current SDK requires a C++ compiler with C++ 11 support. It has been tested with Microsoft Visual (Studio) C++ 2015.</p>

<p>Optional: The SDK has builtin support for using libcurl (https://curl.haxx.se/libcurl/) or Unreal Engine&rsquo;s HTTP functionality for implementing the needed HTTP requests. There is also an interface you can override to provide your own implementation if you can&rsquo;t use either of those.</p>

<h2 id="first-steps">First Steps</h2>
<pre class="highlight cpp tab-cpp"><code><span class="c1">// TGA SDK initialization examples
</span>
<span class="c1">// Unreal Engine ------------
</span><span class="cp">#include "TGAHTTPUnreal.hpp"
</span><span class="c1">//...
</span>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="p">;</span>
    <span class="c1">// Get command line parameters
</span>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cmdLine</span><span class="p">(</span><span class="n">TCHAR_TO_UTF8</span><span class="p">(</span><span class="o">*</span><span class="n">FCommandLine</span><span class="o">::</span><span class="n">Get</span><span class="p">()));</span>
    <span class="n">std</span><span class="o">::</span><span class="n">istringstream</span> <span class="n">iss</span><span class="p">(</span><span class="n">cmdLine</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">copy</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">istream_iterator</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="n">iss</span><span class="p">),</span>
    <span class="n">std</span><span class="o">::</span><span class="n">istream_iterator</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(),</span>
    <span class="n">std</span><span class="o">::</span><span class="n">back_inserter</span><span class="p">(</span><span class="n">parameters</span><span class="p">));</span>

    <span class="c1">// Initialize TGA SDK
</span>    <span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Init</span><span class="p">(</span><span class="k">new</span> <span class="n">TGAHTTPUnreal</span><span class="p">(),</span> <span class="n">parameters</span><span class="p">);</span>
<span class="c1">// --------------------------
</span>
<span class="c1">// Using libcurl ------------
</span><span class="cp">#include "TGAHTTPlibcurl.hpp"
</span><span class="c1">//...
</span>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="p">;</span>
    <span class="c1">// Get parameters
</span>    <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
            <span class="n">parameters</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">string</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>

    <span class="c1">// Initialize TGA SDK
</span>    <span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Init</span><span class="p">(</span><span class="k">new</span> <span class="n">TGAHTTPlibcurl</span><span class="p">(),</span> <span class="n">parameters</span><span class="p">);</span>
<span class="c1">// --------------------------
</span>
<span class="c1">// Using your own TGAHTTPImplementation implementation
</span><span class="cp">#include "TGAHTTPForMyEngine.hpp"
</span><span class="c1">//...
</span>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="p">;</span>
    <span class="c1">// Get parameters ...
</span>
    <span class="c1">// Initialize TGA SDK
</span>    <span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Init</span><span class="p">(</span><span class="k">new</span> <span class="n">TGAHTTPForMyEngine</span><span class="p">(),</span> <span class="n">parameters</span><span class="p">);</span>
<span class="c1">// --------------------------
</span></code></pre>
<ol>
<li>TeacherGaming will send you a .zip package with the latest SDK and assets.</li>
<li>Unzip to your location of choice (inside your project is ok).</li>
<li>Inside the package you will find the tgasdk directory that contains the SDK header files (.hpp).  Add it to your project’s include directories.

<ul>
<li>TGA SDK is a header only library, so there are no source code files that need to be compiled nor library files that need to be linked. All code is in the header files.</li>
</ul></li>
<li>Prepare for making HTTP requests, choose one

<ul>
<li>If using Unreal Engine, enable exceptions for your project (add <code class="prettyprint">bEnableExceptions = true;</code> to your ProjectName.Build.cs)</li>
<li>Install libcurl (https://curl.haxx.se/libcurl/) and add it to your project</li>
<li>Implement <code class="prettyprint">TGAHTTPImplementation</code> yourself</li>
</ul></li>
<li>Add a call to <code class="prettyprint">TGASDK&lt;yourgamenamehere&gt;::Init(...)</code> to your game’s initialization code. 

<ul>
<li>As the first parameter, use one of these. Ownership is transferred to TGASDK.

<ul>
<li><code class="prettyprint">new TGAHTTPUnreal()</code> if using Unreal Engine

<ul>
<li>need to <code class="prettyprint">#include &quot;tgasdk/TGAHTTPUnreal.hpp&quot;</code> first</li>
</ul></li>
<li><code class="prettyprint">new TGAHTTPlibcurl()</code>

<ul>
<li>need to <code class="prettyprint">#include &quot;tgasdk/TGAHTTPlibcurl.hpp&quot;</code> first</li>
</ul></li>
<li>an instance your own implementation of <code class="prettyprint">TGAHTTPImplementation</code>

<ul>
<li>#include your own implementation&rsquo;s header</li>
</ul></li>
</ul></li>
<li>As the second parameter give a list of the command line parameters your application was started with.</li>
</ul></li>
<li>Add a call to <code class="prettyprint">TGASDK&lt;yourgamenamehere&gt;::Cleanup()</code> to your game’s cleanup code.</li>
</ol>

<h2 id="notes">Notes</h2>

<p>Your SDK file is called TGASDK&lt;yourgamenamehere&gt;.hpp. Class inside that file is called TGASDK&lt;yourgamenamehere&gt;. To improve readability, we have not added &lt;yourgamenamehere&gt; for each method call in this document, we are mentioning TGASDK and you should add your game name after each TGASDK call to make it correct.</p>

<h2 id="student-login">Student Login</h2>

<p>Logging in can be done through the TeacherGaming app or in game. If users authenticate in game you will need to add a menu where user can type in a classid and a studentid. Authentication must be done before data can be sent.</p>

<h3 id="automatically-logging-in-with-teachergaming-app">Automatically Logging in with TeacherGaming app</h3>
<pre class="highlight cpp tab-cpp"><code><span class="c1">// You need to supply command line parameters to the initializer for automatic login to work
</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="p">;</span>
<span class="c1">// Get command line parameters and insert them to the vector
</span><span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Init</span><span class="p">(</span><span class="k">new</span> <span class="n">TGAHTTPlibcurl</span><span class="p">(),</span> <span class="n">parameters</span><span class="p">);</span> <span class="o">&lt;-</span> <span class="n">supply</span> <span class="n">the</span> <span class="n">parameters</span> <span class="n">as</span> <span class="n">parameter</span>

<span class="c1">// You can listen to login/logout events by implementing the TGASDK::TGA::LoginStatusChangeListener interface
</span><span class="k">class</span> <span class="nc">MyClassThatListensToLoginStatusChanges</span> <span class="o">:</span> <span class="k">public</span> <span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">LoginStatusChangeListener</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="c1">/// Override to listen for login status changes
</span>    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">OnLoginStatusChanged</span><span class="p">(</span><span class="kt">bool</span> <span class="n">loggedIn</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// If loggedIn is true, the student has just logged in, if false, logged out.
</span>        <span class="c1">// NOTE! Calls to this function may (and usually do) happen in another thread.
</span>    <span class="p">};</span>

    <span class="kt">void</span> <span class="nf">Initialize</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">AddLoginStatusChangeListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="kt">void</span> <span class="nf">Destruct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">RemoveLoginStatusChangeListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>   
    <span class="p">};</span>
<span class="p">};</span>
</code></pre>
<p>For the automatic login system to work in the C++ SDK you need to supply the command line parameters when calling <code class="prettyprint">TGASDK&lt;yourgamenamehere&gt;::Init(...)</code>.</p>

<p>Logging in via TeacerhGaming App is automatically handled by the SDK. You can use <code class="prettyprint">TGASDK::TGA::AddLoginStatusChangeListener</code> to add listeners (that implement <code class="prettyprint">TGASDK::LoginStatusChangeListener</code> inteface) to get notified when the login status changes. The callback gives you one boolean parameter that is true if a student logged in and false if the current student logged out. Remember to call <code class="prettyprint">TGASDK::TGA::RemoveLoginStatusChangeListener</code> before your listener is deleted. Note that the listener can be (and usually is) called in another thread.</p>

<p>You can use the <code class="prettyprint">TGASDK::TGA::LoggedInExternally()</code> function to check if the user logged in using the TeacherGaming App.</p>

<p>You can test the automatic login by giving your game a command line parameter of the following format.</p>

<p><code class="prettyprint">&lt;your bundle identifier&gt;://?classid=&lt;class id&gt;&amp;studentid=&lt;student id&gt;&amp;command=&lt;login/logout&gt;</code></p>

<h3 id="custom-login-menu">Custom Login Menu</h3>

<p>When the student has logged in via TG App, you should not give the user the option to logout or to login as a different student inside the game. Changing the student should only be done via the TG App in this case. It is good if you still have the UI to show the class and student ids. This can be the same UI you use to login inside the game just having the input fields and buttons in a disabled state disabled for example.</p>

<p>Here is an example of a TGA login UI (the built-in UI in the Unity SDK).</p>

<p><img src="images/integrations/unitycsharp/image6.png"/></p>
<pre class="highlight cpp tab-cpp"><code><span class="k">class</span> <span class="nc">LoginUI</span> <span class="o">:</span> <span class="k">public</span> <span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">LoginStatusChangeListener</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">LoginButtonPressed</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">classId</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">studentId</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">LoginAsync</span><span class="p">(</span><span class="n">classId</span><span class="p">,</span> <span class="n">studentId</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>From your login menu you need to pass the class id and student id to the auth process. To do this simply call </p>

<p><code class="prettyprint">static void TGASDK::TGA::LoginAsync(const std::string&amp; classId, const std::string&amp; studentId);</code></p>

<p>Calling this function will start the login process in a new thread. Use <code class="prettyprint">TGASDK::TGA::AddLoginStatusChangeListener</code> to add listeners (that implement <code class="prettyprint">TGASDK::LoginStatusChangeListener</code> inteface) to get notified when the login process has finished. The callback gives you one boolean parameter that is true if a student logged successfully and false if the login failed or if the student logged out. Remember to call <code class="prettyprint">TGASDK::TGA::RemoveLoginStatusChangeListener</code> before your listener is deleted. <strong>Note that the listener can be (and usually is) called in another thread.</strong></p>

<h2 id="sending-events">Sending Events</h2>

<p>The events that have been defined in TGA website are generated to the SDK and can be used to send data from the game to TGA. All the events have their own inner class inside <code class="prettyprint">TGA&lt;yourgamename&gt;</code>.Event with a member variable for each event parameter and functions to start and send the event.</p>

<h3 id="sending-events-with-duration">Sending events with duration</h3>
<pre class="highlight cpp tab-cpp"><code><span class="c1">// Start event
</span><span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Event</span><span class="o">::</span><span class="n">MyEvent</span><span class="o">::</span><span class="n">Start</span><span class="p">();</span>
<span class="p">...</span>
<span class="c1">// While event is going on update variables
</span><span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Event</span><span class="o">::</span><span class="n">MyEvent</span><span class="o">::</span><span class="n">Current</span><span class="p">().</span><span class="n">countOfSomething</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">...</span>
<span class="c1">// Send event
</span><span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Event</span><span class="o">::</span><span class="n">MyEvent</span><span class="o">::</span><span class="n">Send</span><span class="p">();</span>
</code></pre>
<p>This is useful to start an event and send it to us when it’s ready. Our SDK automatically counts time from beginning to end and appends duration to sent data. You can also modify any additional data inside the event before you send it.
To start the event, call <code class="prettyprint">TGASDK::Event::&lt;EventName&gt;::Start()</code>
Now you can gather all needed data for the event. You can change additional data inside the event before you send it. Any data for the started event can be changed using <code class="prettyprint">TGASDK::Event::&lt;EventName&gt;::Current().&lt;datavariable&gt;</code>
To send the event, call <code class="prettyprint">TGASDK::Event::&lt;EventName&gt;::Send()</code></p>

<h3 id="sending-events-without-duration">Sending events without duration</h3>
<pre class="highlight cpp tab-cpp"><code><span class="c1">// Send an event immediately without tracking duration
</span><span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Event</span><span class="o">::</span><span class="n">MyInstantaneousEvent</span><span class="o">::</span><span class="n">Send</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">// Event takes an integer parameter
</span></code></pre>
<p>You can call <code class="prettyprint">GASDK::Event::&lt;EventName&gt;::Send(...)</code> with event data as parameters to send an event immediately, without tracking for duration.</p>

<h2 id="updating-state">Updating state</h2>

<p>Updating state can be done using one of three function calls</p>

<ul>
<li><code class="prettyprint">TGASDK::TGA::UpdateUserState(const std::string&amp; state)</code>

<ul>
<li>This sets the state showing below student name in teacher dashboard. It also resets detailed state showing below this state, if there was any.</li>
</ul></li>
<li><code class="prettyprint">TGASDK::TGA::UpdateUserState(const std::string&amp; state, const std::string&amp; detailedState)</code>

<ul>
<li>This sets the state showing below student name in teacher dashboard and detailed state below it.</li>
</ul></li>
<li><code class="prettyprint">TGASDK::TGA::UpdateUserStateDetailedOnly(const std::string&amp; stateDetailed)</code>

<ul>
<li>This sets the detailed state below main state and does not reset the main state. You can use this to for ex. Update round numbers or other live data happening in current state of your game.</li>
</ul></li>
</ul>

<p>You can keep the state update calls in your game and don’t need to check if user is logged in to TGA, we will automatically check inside the function calls if player is currently authenticated to TGA and send the state update only if so.</p>

<h3 id="state-examples">State examples</h3>
<pre class="highlight cpp tab-cpp"><code><span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">UpdateUserState</span><span class="p">(</span><span class="s">"In Main Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight cpp tab-cpp"><code><span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">UpdateUserState</span><span class="p">(</span><span class="s">"In Settings Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight cpp tab-cpp"><code><span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Singleplayer Game"</span><span class="p">,</span> <span class="s">"Tutorial Level 4"</span><span class="p">);</span>
</code></pre><pre class="highlight cpp tab-cpp"><code><span class="c1">// When game begun
</span><span class="n">TGASDK</span><span class="o">:::</span><span class="n">TGA</span><span class="o">:::</span><span class="n">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Multiplayer Game"</span><span class="p">);</span>
<span class="c1">// When round changed
</span><span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">UpdateUserStateDetailedOnly</span><span class="p">(</span><span class="s">"Round 2"</span><span class="p">);</span>
</code></pre>
<table>
<tr>
    <td width="20%"> <img src="images/integrations/unitycsharp/image5.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image4.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image2.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image1.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image3.png"/> </td>
</tr>
<tr>
    <td><small>Default state for logged-in student </small></td>
    <td><small>Student is in main menu </small></td>
    <td><small>Student is in settings menu</small></td>
    <td><small>Student is playing singleplayer game, Tutorial Level 4 has been passed for detailed state</small></td>
    <td><small>Student is playing multiplayer game, Round number is being passed to detailed state when round changes</small></td>
</tr>
</table>

<h2 id="getting-information">Getting information</h2>

<h3 id="general-information">General information</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// General information</span>

<span class="c1">// Call example: TGASDK.TGA.IsUserLoggedIn()</span>

<span class="c1">// Login information</span>

<span class="c1">// Returns true if logged into TGA, otherwise false.</span>
<span class="kt">bool</span> <span class="nf">IsUserLoggedIn</span><span class="p">()</span>

<span class="c1">// Returns true if logged into TGA via broadcast (TGA App), otherwise false.</span>
<span class="kt">bool</span> <span class="nf">LoggedInExternally</span><span class="p">()</span>

<span class="c1">// Returns the student ID used for login.</span>
<span class="kt">string</span> <span class="nf">GetStudentId</span><span class="p">()</span>

<span class="c1">// Returns the class ID used for login.</span>
<span class="kt">string</span> <span class="nf">GetClassId</span><span class="p">()</span>
</code></pre>
<p>Here (on the right) are some functions you can use to get status information about TGA. All of these are static functions of TGASDK::TGA.</p>

<h3 id="subscription-information">Subscription information</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Subscription information</span>

<span class="c1">// Returns true if game subscription has expired, otherwise false.</span>
<span class="kt">bool</span> <span class="nf">SubscriptionExpired</span><span class="p">()</span>

<span class="c1">// Returns the message that should be shown to user if the subscription has expired</span>
<span class="kt">string</span> <span class="nf">SubscriptionExpiredMessage</span><span class="p">()</span>
</code></pre>
<p>These functions can be used to query if there is a valid subscription for the game. For testing the subscription, there are these two classes: Class h1xme never has subscription expired. Class h1xjr always has subscription expired. Both of these classes have student self-signup enabled so user can login with any studentid for testing.</p>

          <h1 id="http-api">HTTP API</h1>

<p>Our HTTP API can be used if our system does not yet support your programming language / game engine.</p>

<p>Basically, just send data to our REST API through standard HTTPS calls. All data passed needs to be inside the GET query string. Note that for compatibility with special characters, you are always required to URL encode all data sent to our API.</p>

<h2 id="in-game-flow">In-game Flow</h2>

<ol>
<li>User login

<ul>
<li>Successful login needs to be done before any data can be sent to TGA (except anonymous event data)</li>
</ul></li>
<li> Start calling playing game once every 60 seconds

<ul>
<li>After login is successful. This will inform the TGA system that the user is currently playing the game and the user can be tracked. Also the TGA Teacher Dashboard shows that the user is currently playing the game.</li>
</ul></li>
<li> Update player state as it changes in game

<ul>
<li>This information will be shown on the Teacher Dashboard on the TGA website so that the Teacher can easily see what the students are currently doing in game.</li>
</ul></li>
<li> Send event data

<ul>
<li>Events and the data in them have been set up on the TGA website by TeacherGaming. This is the data that is needed to track student progress.</li>
</ul></li>
</ol>

<h2 id="login-student">Login Student</h2>

<blockquote>
<p>Example Output</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Student with this ID exists in this class."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06-13T07:08:47.763Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"debug"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"sent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-15T12:05:35.722Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"container"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zo5jajsD99beDQyt7-pv0n"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"login_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Logged into class &lt;classid&gt; with studentid &lt;studentid&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"login_message_html"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Logged into class &lt;b&gt;classid&lt;/b&gt; with studentid &lt;b&gt;studentid&lt;/b&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"subscription_expired"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscription_expired_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your subscription has expired."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"student"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"studentid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;studentid&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"studentid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;HashedUniqueStudentID&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_account"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"teacher_creatubbles_linked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="s2">"class"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"classid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;classid&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"classid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;HashedUniqueClassID&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allow_student_signup"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"game_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;game’s name&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Login user to our system. Class ID is unique throughout the whole system and student ID is unique throughout the class the user is in. Student ID can be thought as an username and class ID as a password.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://analyticsdata.teachergaming.com/api/validate</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>classid</td>
<td></td>
<td>TGA Class ID</td>
</tr>
<tr>
<td>studentid</td>
<td></td>
<td>TGA studentid</td>
</tr>
<tr>
<td>apikey</td>
<td></td>
<td>Your game&rsquo;s API key</td>
</tr>
</tbody></table>

<aside class="info">
Your API key has been provided to you by TeacherGaming or hardcoded to your SDK.
</aside>

<h2 id="playing-game">Playing Game</h2>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'kittn'</span>

<span class="n">api</span> <span class="o">=</span> <span class="no">Kittn</span><span class="o">::</span><span class="no">APIClient</span><span class="p">.</span><span class="nf">authorize!</span><span class="p">(</span><span class="s1">'meowmeowmeow'</span><span class="p">)</span>
<span class="n">api</span><span class="p">.</span><span class="nf">kittens</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">kittn</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">kittn</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="s">'meowmeowmeow'</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">kittens</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://example.com/api/kittens/2"</span>
  -H <span class="s2">"Authorization: meowmeowmeow"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">kittn</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'kittn'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">kittn</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span><span class="s1">'meowmeowmeow'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">api</span><span class="p">.</span><span class="nx">kittens</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Max"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"breed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unknown"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fluffiness"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cuteness"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Inform TGA that the user is currently logged in and playing. Send once every minute.</p>

<aside class="warning">Inside HTML code blocks like this one, you can&rsquo;t use Markdown, so use <code>&lt;code&gt;</code> blocks to denote code.</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://analyticsdata.teachergaming.com/api/playing_game</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>classid</td>
<td>true</td>
<td>TGA Class ID</td>
</tr>
<tr>
<td>studentid</td>
<td>true</td>
<td>TGA studentid</td>
</tr>
<tr>
<td>apikey</td>
<td>true</td>
<td>Your game&rsquo;s API key</td>
</tr>
</tbody></table>

          <h1 id="oauth">oAuth</h1>

<p>Desk works as oAuth 2 identity provider server. To gain access to these features, please contact us to get your <code class="prettyprint">client_id</code> and <code class="prettyprint">client_secret</code> generated for you.</p>

<p>In a nutshell:</p>

<ol>
<li>Request your <code class="prettyprint">client_id</code> and <code class="prettyprint">client_secret</code> from TeacherGaming</li>
<li>Redirect user to login URL as mentioned in section <a href="#authorization">Authorization</a></li>
<li>User gets redirected to your specified URL, you will get code as parameter. Call our <a href="#token">Token</a> endpoint to exchange that code for token</li>
<li>Verify that token is correct and user is correct by calling our <a href="#user-profile">Profile</a> endpoint.</li>
</ol>

<h2 id="authorization">Authorization</h2>

<p>We currently support authorization code flow. You will need to redirect the user to our request URL and pass the additional parameters.</p>

<h3 id="request">Request</h3>

<p><code class="prettyprint">GET https://analyticsdata.teachergaming.com/api/oauth/authorize</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td></td>
<td>Your <code class="prettyprint">client_id</code>.</td>
</tr>
<tr>
<td>redirect_uri</td>
<td></td>
<td>URL where client gets redirected after succesfull login. These are whitelisted by Teachergaming.</td>
</tr>
<tr>
<td>student_login</td>
<td></td>
<td>Set to <code class="prettyprint">true</code> to login as a student. No need to include this parameter if doing teacher login.</td>
</tr>
<tr>
<td>switch_teacher_student_login</td>
<td></td>
<td>Set to <code class="prettyprint">true</code> to allow switching between teacher and student logins.</td>
</tr>
<tr>
<td>response_type</td>
<td></td>
<td>only <code class="prettyprint">code</code> allowed for now.</td>
</tr>
</tbody></table>

<p>After succesfull login, user will be redirected back to your redirect_uri with code in GET query parameter. Use this code to fetch the token for the user as explained in section <a href="#token">Token</a>.</p>

<h2 id="token">Token</h2>

<p>This endpoint can be used to exchange oauth code with token.</p>

<h3 id="request">Request</h3>

<p><code class="prettyprint">GET https://analyticsdata.teachergaming.com/api/oauth/token</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<blockquote>
<p><span style="color: green">Example Success Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Token created succesfully."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-26T09:47:48.733Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;YourToken&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;ServiceName&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><span style="color: red">Example Failed Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Code not found."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td></td>
<td>Your <code class="prettyprint">client_id</code>.</td>
</tr>
<tr>
<td>client_secret</td>
<td></td>
<td>Your <code class="prettyprint">client_secret</code>.</td>
</tr>
<tr>
<td>student_login</td>
<td></td>
<td>Set to true if student. Do not include this parameter if teacher.</td>
</tr>
<tr>
<td>code</td>
<td></td>
<td>Code you got from us in the <a href="#Authorization">Authorization</a> section.</td>
</tr>
</tbody></table>

<h2 id="user-profile">User Profile</h2>

<p>This endpoint returns information about the user. Requires valid token. This method is useful for verifying that the user information like email address is correct after getting token for a user.</p>

<h3 id="request">Request</h3>

<p><code class="prettyprint">GET https://analyticsdata.teachergaming.com/api/oauth/profile</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<blockquote>
<p><span style="color: green">Example Success Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Profile information fetched succesfully."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-26T09:51:01.858Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isStudent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;userEmail&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><span style="color: red">Example Failed Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Token not found."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td></td>
<td>Your <code class="prettyprint">client_id</code>.</td>
</tr>
<tr>
<td>client_secret</td>
<td></td>
<td>Your <code class="prettyprint">client_secret</code>.</td>
</tr>
<tr>
<td>student_login</td>
<td></td>
<td>Set to true if student. Do not include this parameter if teacher.</td>
</tr>
<tr>
<td>token</td>
<td></td>
<td>Your token.</td>
</tr>
</tbody></table>

<h2 id="revoke-token">Revoke Token</h2>

<p>This endpoint can be used to revoke a token.</p>

<h3 id="request">Request</h3>

<p><code class="prettyprint">GET https://analyticsdata.teachergaming.com/api/oauth/revoke</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<blockquote>
<p><span style="color: green">Example Success Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Token revoked succesfully."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-26T10:03:45.218Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><span style="color: red">Example Failed Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Token not found."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td></td>
<td>Your <code class="prettyprint">client_id</code>.</td>
</tr>
<tr>
<td>client_secret</td>
<td></td>
<td>Your <code class="prettyprint">client_secret</code>.</td>
</tr>
<tr>
<td>student_login</td>
<td></td>
<td>Set to true if student. Do not include this parameter if teacher.</td>
</tr>
<tr>
<td>token</td>
<td></td>
<td>Your token.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
