<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="teachergaming-desk">TeacherGaming Desk</h1>

<p>The TeacherGaming Desk is a classroom toolbox designed to make game-based learning accessible to everyone.  It combinines a portfolio of games with pedagogical support and real-time analytics.</p>

<p>From a technical point of view TeacherGaming Desk is made of three things.</p>

<ol>
<li>A web based platform ( <a href="https://desk.teachergaming.com">https://desk.teachergaming.com</a> ) for teachers, administrators and game developers called Teachergaming Desk that implements the following functionalities for its users.

<ul>
<li>Teachers

<ul>
<li>Lesson plans for using games in education</li>
<li>Analytics information about student skill progress and real-time information about what students are doing in a game</li>
<li>Managing students and classes</li>
<li>Viewing screenshots and other creations students send to Creatubbles</li>
</ul></li>
<li>Administrators

<ul>
<li>Manage subscriptions</li>
<li>Manage teachers</li>
</ul></li>
<li>Developers

<ul>
<li>Manage games and their information</li>
<li>Define the analytics for a game by managing skills, events and activities</li>
<li>Generate SDKs for games</li>
<li>Create lessons for games</li>
<li>Provide oAuth single sign on support for using the TeacherGaming Desk login in other web based applications</li>
</ul></li>
</ul></li>
<li>TeacherGaming App (<a href="https://app.teachergaming.com/">https://app.teachergaming.com/</a>) that is installed on student devices.

<ul>
<li>Download games</li>
<li>Launch games

<ul>
<li>with automatic TeacherGaming Desk student login</li>
</ul></li>
<li>The TeacherGaming android app can be viewed as a “Launcher” that is used to log into TeacherGaming Analytics platform and launch games that have been integrated into it. Logging in running the games with the TG app removes the need to log into every game separately.</li>
</ul></li>
<li>Games with TeacherGaming Desk integration

<ul>
<li>Send analytics to TeacherGaming Desk</li>
<li>Send screenshots and other creations to Creatubbles</li>
</ul></li>
</ol>

          <h1 id="general-sdk-information">General SDK Information</h1>

<h2 id="what-is-tga-sdk">What is TGA SDK</h2>

<p>TeacherGaming Desk, our learning platform, aims to demystify the processes behind game-based learning. It aims to provide educators with an easily understandable way of tracking and assessing the learning that happens in-game.</p>

<p>In more technical terms, the analytics part of TeacherGaming Desk is a web-based platform that collects analytics information (events) sent by games and processes it to reveal what the students (users, players) have learned while playing the game. The SDK for integrating the analytics is called TeacherGaming Desk Analytics SDK, or TGA SDK for short.</p>

<p>This part of the document is written for all game developers that are going to integrate TeacherGaming Desk analytics into their games. It describes how to do the integration on a general level. Integration can be done either by using a ready-made SDK for your platform, or by manually using the HTTP API. More detailed information is available in the specific parts for each SDK, easily accessed from the table of contents on the left.</p>

<h2 id="student-id-and-class-id">Student id and Class id</h2>

<p>Students are identified in TGA by their class and student ids. These are used instead of real names or similar in order to prevent outsiders (anyone except their teachers or parents etc.) from identifying individual students in the system. The class id is a system-wide unique generated alphanumeric identifier that identifies a group of students (usually a class). The student id is an alphanumeric identifier that is unique within a class, and is manually set either by a teacher in the web interface or by the student on first login if automatic generation of students has been allowed for that class.</p>

<p>TeacherGaming Desk analytics (TGA) requires the game to send a class id and a student id for each student playing the game to assign data to the right student. This means that students need to login before data can be sent, except for anonymous event data.</p>

<p>Logging in can be done through the TeacherGaming App or in the game. Implementing the automatic login through TeacherGaming App is mandatory, implementing an in-game login UI is optional. Our Unity C# SDK has a ready-made UI you can use if you are developing on Unity.</p>

<p>You should not save the class and student ids in your game. The student should need to login separately every time the app is started either through the TeacherGaming app or in the game UI.</p>

<h3 id="automatically-logging-in-from-teachergaming-app">Automatically logging in from TeacherGaming app</h3>

<p>When the user has logged in to TeacherGaming app and launches your game the TeacherGaming app passes the login information to your game to allow your game to log in automatically as it is lauched (or brought back to foreground). On Android this is done by using Intent (when app is not already running) and Broadcast (when app is running) parameters. On iOS this is done using an URI scheme. We are planning to change Android to also use the URL scheme in the future, so all new integrations on Android should support that. Support for Intent &amp; Broadcast is also needed since the TeacherGaming App still currently uses those.</p>

<p>On desktop platforms we pass the login information to the game as command line parameters.</p>

<p>The SDKs do the handling of these parameters automatically. When using an SDK all you need to do is listen to a callback (see the platform specific SDK documentation for how to do this) and react appropriately. If you are using the HTTP API you need to do the parameter handling yourself (see the HTTP API documentation and TeacherGaming app Android Intent login documentation).</p>

<p>When the student has logged in via TeacherGaming app you should not give the user the option to logout or to login as different student inside the game. Changing the student should only be done via the TeacherGaming app in this case. It is good if you still have the UI to show the class and student ids but you can leave it out if you wish. This can be the same UI you use to login inside the game just having the input fields and buttons in a disabled state disabled for example.</p>

<h4 id="testing-automatic-login-through-teachergamning-app">Testing automatic login through TeacherGamning App</h4>

<ol>
<li>Search for app called TeacherGaming on Play or App store. Install the app and launch it.</li>
<li>Press “LOGIN TO ANALYTICS” button at the top of the screen</li>
<li>Tap 10 times TG logo at the top of the screen and a new menu will appear</li>
<li>In the new menu input your game’s package name and class id and student id</li>
<li>Press “Launch”
Your game should now run and a popup should inform you about the login result.</li>
</ol>

<h4 id="testing-automatic-login-on-mobile-without-teachergaming-app">Testing automatic login on mobile without TeacherGaming app</h4>
<pre class="highlight plaintext"><code>URI:
&lt;your bundle identifier&gt;://?classid=&lt;class id&gt;&amp;studentid=&lt;student id&gt;&amp;command=&lt;login/logout&gt;

Example (in html file):

&lt;a href = "com.fivemoreminutes.switchandglitch://?classid=h1xme&amp;studentid=student1&amp;command=login"&gt; Login h1xme/student1 &lt;/a&gt;

</code></pre>
<p>Create a html file with links according to the URI scheme or input the URI in the device browser address bar.</p>

<h4 id="testing-automatic-login-on-desktop-without-teachergaming-app">Testing automatic login on desktop without TeacherGaming app</h4>
<pre class="highlight plaintext"><code>Desktop command line examples:

“Switch &amp; Glitch.exe” “com.fivemoreminutes.switchandglitch://?classid=h1xme&amp;studentid=student1&amp;command=login”

“Switch &amp; Glitch.exe” “?classid=h1xme&amp;studentid=student1&amp;command=login”

</code></pre>
<p>On desktop platforms you should test the automatic login by giving the URI on the right as a command line parameter when starting your game.</p>

<p>Replace &lt;your bundle identifier&gt; with your bundle identifier (f.e. com.teachergaming.switchandglitch) &lt;class id&gt; with a class id and &lt;student id&gt; with a student id and choose login or logout as the command. Note that on desktop you can leave the &lt;your bundle identifier&gt;:// part out in case you don’t have a bundle identifier defined. You can also leave the classid=&lt;class id&gt;&amp;studentid=&lt;student id&gt;&amp; part out if you have logout as the command. Note that you should never leave out the ? character. Note that the parameter contains special characters, so remember to put it in &ldquo;&rdquo;.</p>

<h3 id="creating-your-own-ui-for-in-game-login">Creating your own UI for in-game login</h3>

<p>For manually logging in to TGA the student needs to be able to input a class id and a student id. A good place for this UI is for example in a settings menu, or somewhere in the main menu. Usually two input fields with OK and Cancel options is enough. You can also have a Logout button to logout of TGA. Both the class id and student id fields should be either lowercase or uppercase only, not mixed case. In the system the class id and student id are not case sensitive. Uppercase only can be used to make it easier for young children to type the ids.</p>

<h4 id="login-ui-examples">Login UI examples</h4>

<table>
<tr>
    <td width="33%">
        <img src="images/integrations/unitycsharp/image6.png"/><br>
        Unity C# SDK built-in login UI
    </td>
    <td width="33%">
        <img src="images/integrations/general/image4.png"/><br>
        Switch & Glitch manual login
    </td>
    <td width="33%">
        <img src="images/integrations/general/image6.png"/><br>
        Switch & Glitch logged in via TeacherGaming app
    </td>
</tr>
</table>

<h2 id="save-games-user-profiles-and-tga-login">Save games, user profiles and tga login</h2>

<p>If your game has different user profiles for different players, you should tie each tga login to a different user profile. Even if you don’t have user profiles otherwise, it is advisable to tie player progress to TGA login.</p>

<p>Note that when resuming the game and switching profiles, you should log the current user out and switch the profile. This can happen for example when user changes logged in user in TeacherGaming App and launches your game again and your game was already running in the background.</p>

<h2 id="sending-events">Sending events</h2>

<p>Events are used to send specific information about a student&rsquo;s actions in the game. Events and their parameters are defined in TeacherGaming Desk and the API for sending them is generated to the SDK. The events are designed in collaboration with the game developer and the event definitions are put into the TeacherGaming Desk system by TeacherGaming staff.</p>

<p>Events can have three types of parameters: strings, integers or booleans. Each event defined in TeacherGaming Desk will have its own class under TGASDKSomeGame.Event the functions of which you can use to send the event. In this section a general overview with pseudocode is given. See the platform specific SDK documentation for more detailed information on how to send the events.. You don’t need to check if the user is logged in to TGA before sending events. The SDK will automatically check inside the function calls for this.</p>

<h3 id="sending-events-with-duration">Sending events with duration</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Tracking an event with duration</span>
<span class="c1">// Level Start</span>
<span class="n">TGASDKSomeGame</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">LevelCompleted</span><span class="p">.</span><span class="nf">Start</span><span class="p">();</span>

<span class="c1">// Within level, when player gets score</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">SomeGame</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">LevelCompleted</span><span class="p">.</span><span class="n">Score</span> <span class="p">+=</span> <span class="m">1</span>

<span class="c1">// At the end of the level</span>
<span class="n">TGASDKSomeGame</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">LevelCompleted</span><span class="p">.</span><span class="nf">Send</span><span class="p">();</span>
</code></pre>
<p>Our SDK can automatically count time for an event and append duration to sent data. You can modify any additional data inside the event before you send it.
To start the event, call TGASDK.Event.&lt;EventName&gt;.Start().
You can gather all the needed data for the event before you send it using TGASDK.Event.&lt;EventName&gt;.Current.&lt;DataParameter&gt;
To send the event, call TGASDK.Event.&lt;EventName&gt;.Send()</p>

<h3 id="sending-events-without-duration">Sending events without duration</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Sending an event without tracking for duration</span>
<span class="n">TGASDKSomeGame</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">ItemCrafted</span><span class="p">.</span><span class="nf">Send</span><span class="p">(</span><span class="s">"item1"</span><span class="p">);</span>
</code></pre>
<p>If the event is something for which it does not make sense to track a duration you can call TGASDK.Event.&lt;EventName&gt;.Send(&hellip;) with event data as parameters to send the event directly.</p>

<h2 id="updating-state">Updating state</h2>

<p>By default when user logs in, teacher will see in their dashboard state “Playing game” for that student. It is possible to update the state and detailed state for student for what they are currently doing in the game, like In main menu, Playing level 1, Playing Multiplayer, In Settings Menu. This allows teacher to see by glance in teacher dashboard what student is currently doing.</p>

<p>Updating state can be done using one of three function calls</p>

<ul>
<li>TGASDK.TGA.UpdateUserState(string state)

<ul>
<li>This sets the state showing below student name in teacher dashboard. It also resets detailed state showing below this state, if there was any.</li>
</ul></li>
<li>TGASDK.TGA.UpdateUserState(string state, string detailedState)

<ul>
<li>This sets the state showing below student name in teacher dashboard and detailed state below it.</li>
</ul></li>
<li>TGASDK.TGA.UpdateUserStateDetailedOnly(string stateDetailed)

<ul>
<li>This sets the detailed state below main state and does not reset the main state. You can use this to for example update round numbers or other live data happening in current state of your game.</li>
</ul></li>
</ul>

<p>You can keep the state update calls in your game and don’t need to check if user is logged in to TGA, we will automatically check inside the function calls if player is currently logged in to TGA and send the state update only if so.</p>

<h3 id="state-examples">State examples</h3>
<pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"In Main Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"In Settings Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Singleplayer Game"</span><span class="p">,</span> <span class="s">"Tutorial Level 4"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="c1">// When game begun</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Multiplayer Game"</span><span class="p">);</span>
<span class="c1">// When round changed</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserStateDetailedOnly</span><span class="p">(</span><span class="s">"Round 2"</span><span class="p">);</span>
</code></pre>
<table>
<tr>
    <td width="20%"> <img src="images/integrations/unitycsharp/image5.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image4.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image2.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image1.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image3.png"/> </td>
</tr>
<tr>
    <td><small>Default state for logged-in student </small></td>
    <td><small>Student is in main menu </small></td>
    <td><small>Student is in settings menu</small></td>
    <td><small>Student is playing singleplayer game, Tutorial Level 4 has been passed for detailed state</small></td>
    <td><small>Student is playing multiplayer game, Round number is being passed to detailed state when round changes</small></td>
</tr>
</table>

          <h1 id="unity-c-sdk">Unity C# SDK</h1>

<h2 id="general">General</h2>

<p>This document describes the specifics of integrating TGA to your game using the TGA Unity C# SDK. For general integration information and links to other SDK documents see the general SDK instructions.</p>

<h3 id="requirements">Requirements</h3>

<p>Our current SDK requires Unity 4.0.0f7 or later. If you need an SDK for an earlier version of Unity please contact us.</p>

<h3 id="first-steps">First steps</h3>

<ul>
<li>TeacherGaming will send you a .unitypackage with the latest SDK and assets.</li>
<li>Import the package by selecting “Assets -&gt; Import package -&gt; Custom package” in Unity.</li>
<li>Attach the SDK script to a GameObject that is not deleted during the game. The script is located in “TGAGameSpecific/” folder and is named TGASDK<yourgamenamehere>.cs</li>
<li>Updating the SDK and assets can usually be done by simply importing new package and updated files will automatically be detected.

<ul>
<li>If you are having problems and would like to try a complete reimport of the SDK, you can delete the following directories &amp; files before importing the package

<ul>
<li>TGA</li>
<li>TGAGameSpecific</li>
<li>StreamingAssets/TGA</li>
<li>Plugins/Android/AndroidManifest.xml</li>
</ul></li>
<li>In older versions of the SDK you needed to manually attach the CreatubblesManager script to a GameObject. You no longer need to do this and should remove it if you have attached it previously.</li>
</ul></li>
</ul>

<h3 id="notes">Notes</h3>

<p>Your game specific SDK file is called TGASDK<yourgamenamehere>.cs. Class inside that file is called TGASDK<yourgamenamehere>. To improve readability, we have not added <yourgamenamehere> for each method call in this document, we are mentioning TGASDK and you should add your game name after each TGASDK call to make it correct.</p>

<h2 id="student-login">Student login</h2>

<p>Logging in can be done through the TeacherGaming app or in game. If users authenticate in game you will need to add a menu where user can type in a classid and a studentid. Authentication must be done before data can be sent.</p>

<h3 id="automatically-logging-in-with-teachergaming-app">Automatically logging in with TeacherGaming App</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Automatically logging in with TeacherGaming App</span>
<span class="c1">// Login status delegate &amp; event (in TGASDK.TGA)</span>
<span class="k">public</span> <span class="k">delegate</span> <span class="k">void</span> <span class="nf">LoginStatusListener</span><span class="p">(</span><span class="kt">bool</span> <span class="n">isLoggedIn</span><span class="p">);</span>
<span class="k">public</span> <span class="k">static</span> <span class="k">event</span> <span class="n">LoginStatusListener</span> <span class="n">OnLoginStatusChanged</span><span class="p">;</span>
</code></pre><pre class="highlight xml tab-xml"><code><span class="c">&lt;!-- Assets/Plugins/Android/AndroidManifest.xml --&gt;</span>
<span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;manifest</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span> <span class="na">package=</span><span class="s">"com.unity3d.player"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;application</span> <span class="na">android:icon=</span><span class="s">"@drawable/app_icon"</span> <span class="na">android:label=</span><span class="s">"@string/app_name"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">"com.unity3d.player.UnityPlayerActivity"</span>
              <span class="na">android:label=</span><span class="s">"@string/app_name"</span>
              <span class="na">android:configChanges=</span><span class="s">"fontScale|keyboard|keyboardHidden|locale|mnc|mcc|navigation|orientation|screenLayout|screenSize|smallestScreenSize|uiMode|touchscreen"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;intent-filter&gt;</span>
            <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"android.intent.action.MAIN"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"android.intent.category.LAUNCHER"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/intent-filter&gt;</span>
    <span class="nt">&lt;/activity&gt;</span>

    <span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">"com.teachergaming.tga.TGAAndroidUriSchemeActivity"</span>
            <span class="na">android:label=</span><span class="s">"@string/app_name"</span>
            <span class="na">android:launchMode=</span><span class="s">"singleTop"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;intent-filter&gt;</span>
            <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"android.intent.action.VIEW"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"android.intent.category.DEFAULT"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">"android.intent.category.BROWSABLE"</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;data</span> <span class="na">android:scheme=</span><span class="s">"YOUR.BUNDLEIDENTIFIER.HERE"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- REPLACE WITH YOUR GAME'S ANDROID APP BUNDLE IDENTIFIER --&gt;</span>
        <span class="nt">&lt;/intent-filter&gt;</span>
    <span class="nt">&lt;/activity&gt;</span>

    <span class="nt">&lt;receiver</span>
        <span class="na">android:name=</span><span class="s">"com.teachergaming.tgareceiver.TGABroadcastReceiver"</span>
        <span class="na">android:enabled=</span><span class="s">"true"</span>
        <span class="na">android:exported=</span><span class="s">"true"</span> <span class="nt">&gt;</span>
        <span class="nt">&lt;intent-filter&gt;</span>
            <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"com.teachergaming.com.TGAbroadcast"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/intent-filter&gt;</span>
    <span class="nt">&lt;/receiver&gt;</span>

  <span class="nt">&lt;/application&gt;</span>
<span class="nt">&lt;/manifest&gt;</span> 
</code></pre><pre class="highlight plaintext"><code>You can test automatic login using the following URI format
&lt;your bundle identifier&gt;://?classid=&lt;class id&gt;&amp;studentid=&lt;student id&gt;&amp;command=&lt;login/logout&gt;
</code></pre>
<p>Logging in via TeacherGaming App is automatically handled by the SDK. You can listen to the TGASDK.TGA.OnLoginStatusChanged C# event to get notified when the login status changes. The event gives you one boolean parameter that is true if a student logged in and false if the current student logged out. The event is implemented using the C# delegate &amp; event system.</p>

<p>You can use the TGASDK.TGA.LoggedInExternally() to check if the user logged in using the TeacherGaming App.</p>

<p>Note for Android! In future versions of TeacherGaming App we are moving to use URI schemes to forward the login parameters to games on Android, like we already do on iOS. For this to work you need to specify your app&rsquo;s bundle id for the com.teachergaming.tga.TGAAndroidUriSchemeActivity activity in the AndroidManifest.xml file in Assets/Plugins/Android.</p>

<p>On Android and iOS you can test the uri scheme login by creating a .html file with links according to the URI scheme and opening it in your device browser and clicking on the links.</p>

<p>On desktop platforms you should test the automatic login by giving the uri as a command line parameter when starting your game. See https://docs.google.com/document/d/1nEJ5EGwO6JxTTmJGixvxEcBb0VhpMN7sEfOjGHY4JkI/edit#heading=h.1u1ow8hobpr for details.</p>

<h3 id="built-in-login-menu">Built-in login menu</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Built-in login menu</span>
<span class="c1">// Using the built-in login menu</span>

<span class="c1">// First check that not already logged in externally</span>
<span class="k">if</span> <span class="p">(!</span><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">LoggedInExternally</span><span class="p">())</span>
<span class="p">{</span>
    <span class="c1">// Then show the login UI</span>
    <span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">CreateLoginPanel</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
<p>The TGA Unity C# SDK can create a ready made UI that has all the authentication functionality built in. See the code example on the right on how to use it.
A login dialog will be created that looks like this (without the blue background)</p>

<p><img src="images/integrations/unitycsharp/image6.png" title="UnityCSharp Login Example" alt="UnityCSharp Login Example" /></p>

<p>This dialog will inform user if the login failed or succeeded. As with login via TeacherGaming App you can listen to the TGASDK.TGA.OnLoginStatusChanged event to get notified when the login status changes.</p>

<h3 id="handling-subscription-required">Handling subscription required</h3>

<p>You can define the compile time symbol TGA_SUBSCRIPTION_REQUIRED to make the login menu require a subscription. If the symbol is defined you cannot login if you don&rsquo;t have an active subscription and you cannot close the login menu without logging in. Pressing X in the top-right corner will quit the application by calling Application.Quit(). You can also supply your own function for quitting as a parameter for TGASDK.TGA.CreateLoginPanel() for example if you need to bypass your Monobehaviour.OnApplicationQuit handler that calls Application.CancelQuit.</p>

<p>When TGA_SUBSCRIPTION_REQUIRED is defined you should show the login window when the game app is started (main menu or equivalent).</p>

<h3 id="custom-login-menu">Custom login menu</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Custom login menu</span>
<span class="c1">// Logging in from code</span>

<span class="c1">// Create new Auth object and start authentication</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="n">TGAAuth</span> <span class="n">tgaAuth</span> <span class="p">=</span> <span class="k">new</span> <span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">TGAAuth</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="n">TGAAuth</span><span class="p">.</span><span class="nf">AuthUser</span><span class="p">(</span><span class="k">class</span><span class="nc">ID</span><span class="p">,</span> <span class="n">studentID</span><span class="p">));</span>

<span class="c1">// Wait for auth result</span>
<span class="k">yield</span> <span class="k">return</span> <span class="n">tgaAuth</span><span class="p">.</span><span class="n">authResult</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="n">tgaAuth</span><span class="p">.</span><span class="n">authResult</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="s">"true"</span><span class="p">))</span>
<span class="p">{</span>
    <span class="c1">// Authentication succeeded (classid &amp; studentid we’re correct)</span>
<span class="p">}</span>
<span class="k">else</span>
<span class="p">{</span>
    <span class="c1">// Authentication failed (classid &amp; studentid we’re not correct)</span>
<span class="p">}</span>
</code></pre>
<p>Note: If a student has logged in externally (using TeacherGaming App) your custom login menu should not allow changing the login nor logging out. You can check if the user has logged in externally using TGASDK.TGA.LoggedInExternally(). It is recommended you still have the UI to show the class and student ids. This can be the same UI you use to login inside the game just having the input fields and buttons in a disabled state disabled for example.</p>

<p>If you choose to create your own login menu you need to pass the class id and student id to the auth process. From a Monobehaviour script you need to run a coroutine with the code on the right.</p>

<p>You can also listen to the TGASDK.TGA.OnLoginStatusChanged event to get notified when the login status changes.</p>

<h2 id="sending-events">Sending events</h2>

<p>The events that have been defined in TeacherGaming Desk website are generated to the SDK and can be used to send data from the game to Desk. All the events have their own inner class inside TGA&lt;yourgamename&gt;.Event with a property for each event parameter and functions to start and send the event.</p>

<h3 id="sending-events-with-duration">Sending events with duration</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// This is an example with our game Switch N’ Glitch.</span>

<span class="c1">/// When the player enters a singleplayer level, in our StartGame() function </span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="nf">Start</span><span class="p">();</span> 

<span class="c1">// And when the player has completed the level:</span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">LevelId</span> <span class="p">=</span> <span class="n">Client</span><span class="p">.</span><span class="n">UIActiveClient</span><span class="p">.</span><span class="n">LocalGame</span><span class="p">.</span><span class="n">GameBoard</span><span class="p">.</span><span class="n">PrefabPath</span><span class="p">;</span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">FailedCommandCount</span> <span class="p">=</span> <span class="n">player</span><span class="p">.</span><span class="n">failedTileCount</span><span class="p">;</span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">CommitCount</span> <span class="p">=</span> <span class="n">player</span><span class="p">.</span><span class="n">totalCommitCount</span><span class="p">;</span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">OptimalCommitsForLevel</span> <span class="p">=</span> <span class="n">Client</span><span class="p">.</span><span class="n">UIActiveClient</span><span class="p">.</span><span class="n">LocalGame</span><span class="p">.</span><span class="n">GameBoard</span><span class="p">.</span><span class="n">programExecutionsGoal</span><span class="p">;</span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="n">Current</span><span class="p">.</span><span class="n">MetagelCollected</span> <span class="p">=</span> <span class="n">player</span><span class="p">.</span><span class="n">playerScore</span><span class="p">;</span>
<span class="n">TGASDKSwitchGlitch</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SPLevelComplete</span><span class="p">.</span><span class="nf">Send</span><span class="p">();</span>
</code></pre>
<p>This is useful for events that have a clear start and end times and as such a duration. Our SDK can automatically count time from beginning to end and append duration to sent data. You can also modify any additional data inside the event before you send it.
To start an event, call TGASDK.Event.<EventName>.Start()
You can change additional data inside the event before you send it. All data for the started event can be changed using TGASDK.Event.<EventName>.Current.<ParameterName>
To send the event, call TGASDK.Event.<EventName>.Send() without parameters.</p>

<h3 id="sending-events-without-duration">Sending events without duration</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Sending an event without duration</span>

<span class="c1">// This example is from KerbalEdu</span>
<span class="n">TGASDKKerbalEdu</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">SituationChange</span><span class="p">.</span><span class="nf">Send</span><span class="p">(</span><span class="n">FlightGlobals</span><span class="p">.</span><span class="n">ActiveVessel</span><span class="p">.</span><span class="n">mainBody</span><span class="p">.</span><span class="n">bodyName</span><span class="p">,</span> <span class="n">FlightGlobals</span><span class="p">.</span><span class="n">ActiveVessel</span><span class="p">.</span><span class="n">situation</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(),</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">FlightGlobals</span><span class="p">.</span><span class="n">ActiveVessel</span><span class="p">.</span><span class="n">totalMass</span><span class="p">);</span>
</code></pre>
<p>You can call TGASDK.Event.<EventName>.Send(&hellip;) with event data as parameters to send an event immediately, without tracking for duration.</p>

<h2 id="updating-state">Updating state</h2>

<p>See <a href="#updating-state2.4.">2.4. UPDATING STATE</a>.</p>

<p>Updating state can be done using one of three function calls</p>

<ul>
<li><code class="prettyprint">TGASDK.TGA.UpdateUserState(string state)</code>

<ul>
<li>This sets the state showing below student name in teacher dashboard. It also resets detailed state showing below this state, if there was any.</li>
</ul></li>
<li><code class="prettyprint">TGASDK.TGA.UpdateUserState(string state, string detailedState)</code>

<ul>
<li>This sets the state showing below student name in teacher dashboard and detailed state below it.</li>
</ul></li>
<li><code class="prettyprint">TGASDK.TGA.UpdateUserStateDetailedOnly(string stateDetailed)</code>

<ul>
<li>This sets the detailed state below main state and does not reset the main state. You can use this to for ex. Update round numbers or other live data happening in current state of your game.</li>
</ul></li>
</ul>

<p>You can keep the state update calls in your game and don’t need to check if user is logged in to TGA, we will automatically check inside the function calls if player is currently authenticated to TGA and send the state update only if so.</p>

<h3 id="state-examples">State examples</h3>
<pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"In Main Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"In Settings Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Singleplayer Game"</span><span class="p">,</span> <span class="s">"Tutorial Level 4"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="c1">// When game begun</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Multiplayer Game"</span><span class="p">);</span>
<span class="c1">// When round changed</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserStateDetailedOnly</span><span class="p">(</span><span class="s">"Round 2"</span><span class="p">);</span>
</code></pre>
<table>
<tr>
    <td width="20%"> <img src="images/integrations/unitycsharp/image5.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image4.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image2.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image1.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image3.png"/> </td>
</tr>
<tr>
    <td><small>Default state for logged-in student </small></td>
    <td><small>Student is in main menu </small></td>
    <td><small>Student is in settings menu</small></td>
    <td><small>Student is playing singleplayer game, Tutorial Level 4 has been passed for detailed state</small></td>
    <td><small>Student is playing multiplayer game, Round number is being passed to detailed state when round changes</small></td>
</tr>
</table>

<h2 id="creatubbles">Creatubbles</h2>

<p>Creatubbles integration can be used to take a screenshot of the game and send it to TGA and Creatubbles web page. To use this feature the user needs to be logged in to TGA and the CreatubblesManager script needs to be attached to a gameobject as explained in the FIRST STEPS section.</p>

<h3 id="usage">Usage</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">/// Creatubbles</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">ScreenShotToCreatubbles</span><span class="p">();</span>
</code></pre>
<p>To send a screenshot to TGA you can simply call TGASDK.TGA.ScreenShotToCreatubbles(). This will take a screenshot and open a UI that shows you the image that would be sent and where you can enter a description for the screenshot.
<img src="images/integrations/unitycsharp/image7.png" title="Creatubbles UI" alt="Creatubbles UI" /></p>

<p>For example you can create a simple button to send the screenshot and show it in your in-game UI. There is a camera texture in the “TGA/Resources/Graphics/” folder that you can use with the button if you wish.</p>

<h2 id="getting-information">Getting information</h2>

<h3 id="general-information">General information</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// General information</span>

<span class="c1">// Call example: TGASDK.TGA.IsUserLoggedIn()</span>

<span class="c1">// Login information</span>

<span class="c1">// Returns true if logged into TGA, otherwise false.</span>
<span class="kt">bool</span> <span class="nf">IsUserLoggedIn</span><span class="p">()</span>

<span class="c1">// Returns true if logged into TGA via broadcast (TGA App), otherwise false.</span>
<span class="kt">bool</span> <span class="nf">LoggedInExternally</span><span class="p">()</span>

<span class="c1">// Returns the student ID used for login.</span>
<span class="kt">string</span> <span class="nf">GetStudentId</span><span class="p">()</span>

<span class="c1">// Returns the class ID used for login.</span>
<span class="kt">string</span> <span class="nf">GetClassId</span><span class="p">()</span>
</code></pre>
<p>Here (on the right) are some functions you can use to get status information about TGA. All of these are static functions of TGASDK.TGA.</p>

<h3 id="subscription-information">Subscription information</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Subscription information</span>

<span class="c1">// Returns true if game subscription has expired, otherwise false.</span>
<span class="kt">bool</span> <span class="nf">SubscriptionExpired</span><span class="p">()</span>

<span class="c1">// Returns the message that should be shown to user if the subscription has expired</span>
<span class="kt">string</span> <span class="nf">SubscriptionExpiredMessage</span><span class="p">()</span>
</code></pre>
<p>These functions can be used to query if there is a valid subscription for the game. For testing the subscription, there are these two classes: Class h1xme never has subscription expired. Class h1xjr always has subscription expired. Both of these classes have student self-signup enabled so user can login with any studentid for testing.</p>

          <h1 id="c-sdk">C++ SDK</h1>

<h2 id="general">General</h2>

<p>This document describes the specifics of integrating Teachergaming Desk to your game using the TGA C++ SDK. For general integration information and links to other SDK documents see the general SDK information.</p>

<h2 id="requirements">Requirements</h2>

<p>Our current SDK requires a C++ compiler with C++ 11 support. It has been tested with Microsoft Visual (Studio) C++ 2015.</p>

<p>Optional: The SDK has builtin support for using libcurl (https://curl.haxx.se/libcurl/) or Unreal Engine&rsquo;s HTTP functionality for implementing the needed HTTP requests. There is also an interface you can override to provide your own implementation if you can&rsquo;t use either of those.</p>

<h2 id="first-steps">First Steps</h2>
<pre class="highlight cpp tab-cpp"><code><span class="c1">// TGA SDK initialization examples
</span>
<span class="c1">// Unreal Engine ------------
</span><span class="cp">#include "TGAHTTPUnreal.hpp"
</span><span class="c1">//...
</span>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="p">;</span>
    <span class="c1">// Get command line parameters
</span>    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">cmdLine</span><span class="p">(</span><span class="n">TCHAR_TO_UTF8</span><span class="p">(</span><span class="o">*</span><span class="n">FCommandLine</span><span class="o">::</span><span class="n">Get</span><span class="p">()));</span>
    <span class="n">std</span><span class="o">::</span><span class="n">istringstream</span> <span class="n">iss</span><span class="p">(</span><span class="n">cmdLine</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">copy</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">istream_iterator</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(</span><span class="n">iss</span><span class="p">),</span>
    <span class="n">std</span><span class="o">::</span><span class="n">istream_iterator</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">(),</span>
    <span class="n">std</span><span class="o">::</span><span class="n">back_inserter</span><span class="p">(</span><span class="n">parameters</span><span class="p">));</span>

    <span class="c1">// Initialize TGA SDK
</span>    <span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Init</span><span class="p">(</span><span class="k">new</span> <span class="n">TGAHTTPUnreal</span><span class="p">(),</span> <span class="n">parameters</span><span class="p">);</span>
<span class="c1">// --------------------------
</span>
<span class="c1">// Using libcurl ------------
</span><span class="cp">#include "TGAHTTPlibcurl.hpp"
</span><span class="c1">//...
</span>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="p">;</span>
    <span class="c1">// Get parameters
</span>    <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">argc</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
            <span class="n">parameters</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">string</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>

    <span class="c1">// Initialize TGA SDK
</span>    <span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Init</span><span class="p">(</span><span class="k">new</span> <span class="n">TGAHTTPlibcurl</span><span class="p">(),</span> <span class="n">parameters</span><span class="p">);</span>
<span class="c1">// --------------------------
</span>
<span class="c1">// Using your own TGAHTTPImplementation implementation
</span><span class="cp">#include "TGAHTTPForMyEngine.hpp"
</span><span class="c1">//...
</span>    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="p">;</span>
    <span class="c1">// Get parameters ...
</span>
    <span class="c1">// Initialize TGA SDK
</span>    <span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Init</span><span class="p">(</span><span class="k">new</span> <span class="n">TGAHTTPForMyEngine</span><span class="p">(),</span> <span class="n">parameters</span><span class="p">);</span>
<span class="c1">// --------------------------
</span></code></pre>
<ol>
<li>TeacherGaming will send you a .zip package with the latest SDK and assets.</li>
<li>Unzip to your location of choice (inside your project is ok).</li>
<li>Inside the package you will find the tgasdk directory that contains the SDK header files (.hpp).  Add it to your project’s include directories.

<ul>
<li>TGA SDK is a header only library, so there are no source code files that need to be compiled nor library files that need to be linked. All code is in the header files.</li>
</ul></li>
<li>Prepare for making HTTP requests, choose one

<ul>
<li>If using Unreal Engine, enable exceptions for your project (add <code class="prettyprint">bEnableExceptions = true;</code> to your ProjectName.Build.cs)</li>
<li>Install libcurl (https://curl.haxx.se/libcurl/) and add it to your project</li>
<li>Implement <code class="prettyprint">TGAHTTPImplementation</code> yourself</li>
</ul></li>
<li>Add a call to <code class="prettyprint">TGASDK&lt;yourgamenamehere&gt;::Init(...)</code> to your game’s initialization code. 

<ul>
<li>As the first parameter, use one of these. Ownership is transferred to TGASDK.

<ul>
<li><code class="prettyprint">new TGAHTTPUnreal()</code> if using Unreal Engine

<ul>
<li>need to <code class="prettyprint">#include &quot;tgasdk/TGAHTTPUnreal.hpp&quot;</code> first</li>
</ul></li>
<li><code class="prettyprint">new TGAHTTPlibcurl()</code>

<ul>
<li>need to <code class="prettyprint">#include &quot;tgasdk/TGAHTTPlibcurl.hpp&quot;</code> first</li>
</ul></li>
<li>an instance your own implementation of <code class="prettyprint">TGAHTTPImplementation</code>

<ul>
<li>#include your own implementation&rsquo;s header</li>
</ul></li>
</ul></li>
<li>As the second parameter give a list of the command line parameters your application was started with.</li>
</ul></li>
<li>Add a call to <code class="prettyprint">TGASDK&lt;yourgamenamehere&gt;::Cleanup()</code> to your game’s cleanup code.</li>
</ol>

<h2 id="notes">Notes</h2>

<p>Your SDK file is called TGASDK&lt;yourgamenamehere&gt;.hpp. Class inside that file is called TGASDK&lt;yourgamenamehere&gt;. To improve readability, we have not added &lt;yourgamenamehere&gt; for each method call in this document, we are mentioning TGASDK and you should add your game name after each TGASDK call to make it correct.</p>

<h2 id="student-login">Student Login</h2>

<p>Logging in can be done through the TeacherGaming app or in game. If users authenticate in game you will need to add a menu where user can type in a classid and a studentid. Authentication must be done before data can be sent.</p>

<h3 id="automatically-logging-in-with-teachergaming-app">Automatically Logging in with TeacherGaming app</h3>
<pre class="highlight cpp tab-cpp"><code><span class="c1">// You need to supply command line parameters to the initializer for automatic login to work
</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="p">;</span>
<span class="c1">// Get command line parameters and insert them to the vector
</span><span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Init</span><span class="p">(</span><span class="k">new</span> <span class="n">TGAHTTPlibcurl</span><span class="p">(),</span> <span class="n">parameters</span><span class="p">);</span> <span class="o">&lt;-</span> <span class="n">supply</span> <span class="n">the</span> <span class="n">parameters</span> <span class="n">as</span> <span class="n">parameter</span>

<span class="c1">// You can listen to login/logout events by implementing the TGASDK::TGA::LoginStatusChangeListener interface
</span><span class="k">class</span> <span class="nc">MyClassThatListensToLoginStatusChanges</span> <span class="o">:</span> <span class="k">public</span> <span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">LoginStatusChangeListener</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="c1">/// Override to listen for login status changes
</span>    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">OnLoginStatusChanged</span><span class="p">(</span><span class="kt">bool</span> <span class="n">loggedIn</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// If loggedIn is true, the student has just logged in, if false, logged out.
</span>        <span class="c1">// NOTE! Calls to this function may (and usually do) happen in another thread.
</span>    <span class="p">};</span>

    <span class="kt">void</span> <span class="nf">Initialize</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">AddLoginStatusChangeListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="kt">void</span> <span class="nf">Destruct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">RemoveLoginStatusChangeListener</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>   
    <span class="p">};</span>
<span class="p">};</span>
</code></pre>
<p>For the automatic login system to work in the C++ SDK you need to supply the command line parameters when calling <code class="prettyprint">TGASDK&lt;yourgamenamehere&gt;::Init(...)</code>.</p>

<p>Logging in via TeacerhGaming App is automatically handled by the SDK. You can use <code class="prettyprint">TGASDK::TGA::AddLoginStatusChangeListener</code> to add listeners (that implement <code class="prettyprint">TGASDK::LoginStatusChangeListener</code> inteface) to get notified when the login status changes. The callback gives you one boolean parameter that is true if a student logged in and false if the current student logged out. Remember to call <code class="prettyprint">TGASDK::TGA::RemoveLoginStatusChangeListener</code> before your listener is deleted. Note that the listener can be (and usually is) called in another thread.</p>

<p>You can use the <code class="prettyprint">TGASDK::TGA::LoggedInExternally()</code> function to check if the user logged in using the TeacherGaming App.</p>

<p>You can test the automatic login by giving your game a command line parameter of the following format.</p>

<p><code class="prettyprint">&lt;your bundle identifier&gt;://?classid=&lt;class id&gt;&amp;studentid=&lt;student id&gt;&amp;command=&lt;login/logout&gt;</code></p>

<h3 id="custom-login-menu">Custom Login Menu</h3>

<p>When the student has logged in via TG App, you should not give the user the option to logout or to login as a different student inside the game. Changing the student should only be done via the TG App in this case. It is good if you still have the UI to show the class and student ids. This can be the same UI you use to login inside the game just having the input fields and buttons in a disabled state disabled for example.</p>

<p>Here is an example of a TGA login UI (the built-in UI in the Unity SDK).</p>

<p><img src="images/integrations/unitycsharp/image6.png"/></p>
<pre class="highlight cpp tab-cpp"><code><span class="k">class</span> <span class="nc">LoginUI</span> <span class="o">:</span> <span class="k">public</span> <span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">LoginStatusChangeListener</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="n">LoginButtonPressed</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">classId</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">studentId</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">LoginAsync</span><span class="p">(</span><span class="n">classId</span><span class="p">,</span> <span class="n">studentId</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>From your login menu you need to pass the class id and student id to the auth process. To do this simply call </p>

<p><code class="prettyprint">static void TGASDK::TGA::LoginAsync(const std::string&amp; classId, const std::string&amp; studentId);</code></p>

<p>Calling this function will start the login process in a new thread. Use <code class="prettyprint">TGASDK::TGA::AddLoginStatusChangeListener</code> to add listeners (that implement <code class="prettyprint">TGASDK::LoginStatusChangeListener</code> inteface) to get notified when the login process has finished. The callback gives you one boolean parameter that is true if a student logged successfully and false if the login failed or if the student logged out. Remember to call <code class="prettyprint">TGASDK::TGA::RemoveLoginStatusChangeListener</code> before your listener is deleted. <strong>Note that the listener can be (and usually is) called in another thread.</strong></p>

<h2 id="sending-events">Sending Events</h2>

<p>The events that have been defined in TGA website are generated to the SDK and can be used to send data from the game to TGA. All the events have their own inner class inside <code class="prettyprint">TGA&lt;yourgamename&gt;</code>.Event with a member variable for each event parameter and functions to start and send the event.</p>

<h3 id="sending-events-with-duration">Sending events with duration</h3>
<pre class="highlight cpp tab-cpp"><code><span class="c1">// Start event
</span><span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Event</span><span class="o">::</span><span class="n">MyEvent</span><span class="o">::</span><span class="n">Start</span><span class="p">();</span>
<span class="p">...</span>
<span class="c1">// While event is going on update variables
</span><span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Event</span><span class="o">::</span><span class="n">MyEvent</span><span class="o">::</span><span class="n">Current</span><span class="p">().</span><span class="n">countOfSomething</span> <span class="o">+=</span> <span class="mi">5</span><span class="p">;</span>
<span class="p">...</span>
<span class="c1">// Send event
</span><span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Event</span><span class="o">::</span><span class="n">MyEvent</span><span class="o">::</span><span class="n">Send</span><span class="p">();</span>
</code></pre>
<p>This is useful to start an event and send it to us when it’s ready. Our SDK automatically counts time from beginning to end and appends duration to sent data. You can also modify any additional data inside the event before you send it.
To start the event, call <code class="prettyprint">TGASDK::Event::&lt;EventName&gt;::Start()</code>
Now you can gather all needed data for the event. You can change additional data inside the event before you send it. Any data for the started event can be changed using <code class="prettyprint">TGASDK::Event::&lt;EventName&gt;::Current().&lt;datavariable&gt;</code>
To send the event, call <code class="prettyprint">TGASDK::Event::&lt;EventName&gt;::Send()</code></p>

<h3 id="sending-events-without-duration">Sending events without duration</h3>
<pre class="highlight cpp tab-cpp"><code><span class="c1">// Send an event immediately without tracking duration
</span><span class="n">TGASDKMyGame</span><span class="o">::</span><span class="n">Event</span><span class="o">::</span><span class="n">MyInstantaneousEvent</span><span class="o">::</span><span class="n">Send</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">// Event takes an integer parameter
</span></code></pre>
<p>You can call <code class="prettyprint">GASDK::Event::&lt;EventName&gt;::Send(...)</code> with event data as parameters to send an event immediately, without tracking for duration.</p>

<h2 id="updating-state">Updating state</h2>

<p>See <a href="#updating-state2.4.">2.4. UPDATING STATE</a>.</p>

<p>Updating state can be done using one of three function calls</p>

<ul>
<li><code class="prettyprint">TGASDK::TGA::UpdateUserState(const std::string&amp; state)</code>

<ul>
<li>This sets the state showing below student name in teacher dashboard. It also resets detailed state showing below this state, if there was any.</li>
</ul></li>
<li><code class="prettyprint">TGASDK::TGA::UpdateUserState(const std::string&amp; state, const std::string&amp; detailedState)</code>

<ul>
<li>This sets the state showing below student name in teacher dashboard and detailed state below it.</li>
</ul></li>
<li><code class="prettyprint">TGASDK::TGA::UpdateUserStateDetailedOnly(const std::string&amp; stateDetailed)</code>

<ul>
<li>This sets the detailed state below main state and does not reset the main state. You can use this to for ex. Update round numbers or other live data happening in current state of your game.</li>
</ul></li>
</ul>

<p>You can keep the state update calls in your game and don’t need to check if user is logged in to TGA, we will automatically check inside the function calls if player is currently authenticated to TGA and send the state update only if so.</p>

<h3 id="state-examples">State examples</h3>
<pre class="highlight cpp tab-cpp"><code><span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">UpdateUserState</span><span class="p">(</span><span class="s">"In Main Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight cpp tab-cpp"><code><span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">UpdateUserState</span><span class="p">(</span><span class="s">"In Settings Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight cpp tab-cpp"><code><span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Singleplayer Game"</span><span class="p">,</span> <span class="s">"Tutorial Level 4"</span><span class="p">);</span>
</code></pre><pre class="highlight cpp tab-cpp"><code><span class="c1">// When game begun
</span><span class="n">TGASDK</span><span class="o">:::</span><span class="n">TGA</span><span class="o">:::</span><span class="n">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Multiplayer Game"</span><span class="p">);</span>
<span class="c1">// When round changed
</span><span class="n">TGASDK</span><span class="o">::</span><span class="n">TGA</span><span class="o">::</span><span class="n">UpdateUserStateDetailedOnly</span><span class="p">(</span><span class="s">"Round 2"</span><span class="p">);</span>
</code></pre>
<table>
<tr>
    <td width="20%"> <img src="images/integrations/unitycsharp/image5.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image4.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image2.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image1.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image3.png"/> </td>
</tr>
<tr>
    <td><small>Default state for logged-in student </small></td>
    <td><small>Student is in main menu </small></td>
    <td><small>Student is in settings menu</small></td>
    <td><small>Student is playing singleplayer game, Tutorial Level 4 has been passed for detailed state</small></td>
    <td><small>Student is playing multiplayer game, Round number is being passed to detailed state when round changes</small></td>
</tr>
</table>

<h2 id="getting-information">Getting information</h2>

<h3 id="general-information">General information</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// General information</span>

<span class="c1">// Call example: TGASDK.TGA.IsUserLoggedIn()</span>

<span class="c1">// Login information</span>

<span class="c1">// Returns true if logged into TGA, otherwise false.</span>
<span class="kt">bool</span> <span class="nf">IsUserLoggedIn</span><span class="p">()</span>

<span class="c1">// Returns true if logged into TGA via broadcast (TGA App), otherwise false.</span>
<span class="kt">bool</span> <span class="nf">LoggedInExternally</span><span class="p">()</span>

<span class="c1">// Returns the student ID used for login.</span>
<span class="kt">string</span> <span class="nf">GetStudentId</span><span class="p">()</span>

<span class="c1">// Returns the class ID used for login.</span>
<span class="kt">string</span> <span class="nf">GetClassId</span><span class="p">()</span>
</code></pre>
<p>Here (on the right) are some functions you can use to get status information about TGA. All of these are static functions of TGASDK::TGA.</p>

<h3 id="subscription-information">Subscription information</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Subscription information</span>

<span class="c1">// Returns true if game subscription has expired, otherwise false.</span>
<span class="kt">bool</span> <span class="nf">SubscriptionExpired</span><span class="p">()</span>

<span class="c1">// Returns the message that should be shown to user if the subscription has expired</span>
<span class="kt">string</span> <span class="nf">SubscriptionExpiredMessage</span><span class="p">()</span>
</code></pre>
<p>These functions can be used to query if there is a valid subscription for the game. For testing the subscription, there are these two classes: Class h1xme never has subscription expired. Class h1xjr always has subscription expired. Both of these classes have student self-signup enabled so user can login with any studentid for testing.</p>

          <h1 id="android-java-sdk">Android Java SDK</h1>

<p>This document describes the specifics of integrating TeacherGaming Desk to your game using the TGA Android Java SDK. For general integration information and links to other SDK documents see the general SDK instructions.</p>

<h2 id="first-steps">First Steps</h2>

<p>TeacherGaming will send you a <code class="prettyprint">TGASDK&lt;gamename&gt;.java</code> file. Copy the <code class="prettyprint">TGASDK&lt;gamename&gt;.java</code> file to your project’s <code class="prettyprint">src/com/teachergaming/tga</code> folder. Updating the SDK can be done by simply replacing the old SDK file with new one.</p>

<h2 id="notes">Notes</h2>

<p>Your SDK file is called <code class="prettyprint">TGASDK&lt;gamename&gt;.java</code>. Class inside that file is called <code class="prettyprint">TGASDK&lt;gamename&gt;</code>. To improve readability, we have not added &lt;gamename&gt; for each method call in this document, we are mentioning TGASDK and you should add your game name after each TGASDK call to make it correct.</p>

<h2 id="student-login">Student Login</h2>

<h3 id="automatically-logging-in-with-teachergaming-app">Automatically Logging in with TeacherGaming App</h3>

<p>For the automatic login to work correctly you need to pass the intent received in your main activity’s <code class="prettyprint">onCreate</code> function to the SDK by calling</p>

<p><code class="prettyprint">TGASDKSwitchGlitch.TGA.HandleIntent(getIntent());</code></p>
<pre class="highlight java tab-java"><code><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onNewIntent</span><span class="o">(</span><span class="n">Intent</span> <span class="n">intent</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onNewIntent</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
    <span class="n">setIntent</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
    <span class="n">TGASDKSwitchGlitch</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">HandleIntent</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
<p>You also need to override the onNewIntent function with the code on the right.</p>

<p>The Java Android SDK automatically handles broadcast logins via TG App. You can get notified about students logging in and logging out by implementing the <code class="prettyprint">TGASDK.TGA.AuthUserListener</code>
interface and adding your listener using
<code class="prettyprint">TGASDK.TGA.AddAuthUserListener(AuthUserListener added)</code>
Remember to also remove the listener using
<code class="prettyprint">TGASDK.TGA.RemoveAuthUserListener(AuthUserListener removed)</code></p>

<h3 id="manual-login">Manual Login</h3>

<h4 id="see-2-1-2-creating-your-own-ui-for-in-game-login-for-information-about-manual-login-and-guidelines-for-creating-a-login-ui">See <a href="#creating-your-own-ui-for-in-game-login2.1.2.">2.1.2. Creating your own UI for in-game login</a> for information about manual login and guidelines for creating a login UI.</h4>

<h4 id="validating-login">Validating Login</h4>
<pre class="highlight java tab-java"><code><span class="n">TGASDK</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">AuthUser</span><span class="o">(</span><span class="n">classID</span><span class="o">,</span> <span class="n">studentID</span><span class="o">,</span> <span class="n">listener</span><span class="o">);</span>
</code></pre>
<p>Login can be authenticated with the code below and on the right.</p>

<p><code class="prettyprint">TGASDK.TGA.AuthUser(classID, studentID, listener);</code></p>
<pre class="highlight java tab-java"><code><span class="c1">// Login listener interface</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">AuthUserListener</span>
<span class="o">{</span>
    <span class="kt">void</span> <span class="nf">OnTGAAuthUserComplete</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">authenticated</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// Override example</span>
<span class="n">TGASDKTeacherGamingApp</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">AuthUser</span><span class="o">(</span><span class="s">"test"</span><span class="o">,</span> <span class="s">"student1"</span><span class="o">,</span> <span class="k">new</span> <span class="n">AuthUserListener</span><span class="o">()</span> <span class="o">{</span>
<span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">OnTGAAuthUserComplete</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">authenticated</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Handle login here</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"LOGIN RESPONSE: "</span> <span class="o">+</span> <span class="n">authenticated</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre>
<p>Where classID and studentID are the class and student ID’s you want to login with, and listener implements the <code class="prettyprint">AuthUserListener</code> interface to listen when the login has completed.</p>

<h2 id="sending-events">Sending Events</h2>

<p>The events that have been defined in TGA website are generated to the SDK and can be used to send data from the game to TGA.</p>

<h3 id="sending-events-with-duration">Sending Events with Duration</h3>
<pre class="highlight java tab-java"><code><span class="c1">// Start event</span>
<span class="n">TGASDKMyGame</span><span class="o">.</span><span class="na">Event</span><span class="o">.</span><span class="na">MyEvent</span><span class="o">.</span><span class="na">Start</span><span class="o">();</span>
<span class="o">...</span>
<span class="c1">// While event is going on update variables</span>
<span class="n">TGASDKMyGame</span><span class="o">.</span><span class="na">Event</span><span class="o">.</span><span class="na">MyEvent</span><span class="o">.</span><span class="na">Current</span><span class="o">().</span><span class="na">countOfSomething</span> <span class="o">+=</span> <span class="mi">5</span><span class="o">;</span>
<span class="o">...</span>
<span class="c1">// Send event</span>
<span class="n">TGASDKMyGame</span><span class="o">.</span><span class="na">Event</span><span class="o">.</span><span class="na">MyEvent</span><span class="o">.</span><span class="na">Send</span><span class="o">();</span>
</code></pre>
<p>This is useful for events that have a duration. You can start an event and then send it to TeacherGaming Desk when it ends. Our SDK automatically counts time from beginning to end and appends duration to sent data. You can also modify any additional data inside the event before you send it.
To start the event, call <code class="prettyprint">TGASDK.Event.&lt;EventName&gt;.Start()</code>
After that you can gather all needed data for the event. You can change additional data inside the event before you send it. All data for the started event can be changed using <code class="prettyprint">TGASDK.Event.&lt;EventName&gt;.Current.&lt;EventParameter&gt;</code> variables.
To send the event, call <code class="prettyprint">TGASDK.Event.&lt;EventName&gt;.Send()</code></p>

<h2 id="sending-events-without-duration">Sending Events without Duration</h2>
<pre class="highlight java tab-java"><code><span class="c1">// Send an event immediately without tracking duration</span>
<span class="n">TGASDKMyGame</span><span class="o">.</span><span class="na">Event</span><span class="o">.</span><span class="na">MyInstantaneousEvent</span><span class="o">.</span><span class="na">Send</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span> <span class="c1">// Event takes an integer parameter</span>
</code></pre>
<p>If event is something for which it does not make sense to track duration you can call <code class="prettyprint">TGASDK.Event.&lt;EventName&gt;.Send(...)</code> with the event data as parameters to send the event directly.</p>

<h2 id="updating-state">Updating state</h2>

<p>See <a href="#updating-state2.4.">2.4. UPDATING STATE</a>.</p>

<p>Updating state can be done using one of three function calls.</p>

<ul>
<li><code class="prettyprint">TGASDK.TGA.UpdateUserState(string state)</code>

<ul>
<li>This sets the state showing below student name in teacher dashboard. It also resets detailed state showing below this state, if there was any.</li>
</ul></li>
<li><code class="prettyprint">TGASDK.TGA.UpdateUserState(string state, string detailedState)</code>

<ul>
<li>This sets the state showing below student name in teacher dashboard and detailed state below it.</li>
</ul></li>
<li><code class="prettyprint">TGASDK.TGA.UpdateUserStateDetailedOnly(string stateDetailed)</code>

<ul>
<li>This sets the detailed state below main state and does not reset the main state. You can use this to for ex. Update round numbers or other live data happening in current state of your game.</li>
</ul></li>
</ul>

<p>You can keep the state update calls in your game and don’t need to check if user is logged in to TGA, we will automatically check inside the function calls if player is currently authenticated to TGA and send the state update only if so.</p>

<h3 id="state-examples">State examples</h3>
<pre class="highlight java tab-java"><code><span class="n">TGASDK</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">UpdateUserState</span><span class="o">(</span><span class="s">"In Main Menu"</span><span class="o">);</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TGASDK</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">UpdateUserState</span><span class="o">(</span><span class="s">"In Settings Menu"</span><span class="o">);</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">TGASDK</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">UpdateUserState</span><span class="o">(</span><span class="s">"Playing Singleplayer Game"</span><span class="o">,</span> <span class="s">"Tutorial Level 4"</span><span class="o">);</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">// When game begun</span>
<span class="n">TGASDK</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">UpdateUserState</span><span class="o">(</span><span class="s">"Playing Multiplayer Game"</span><span class="o">);</span>
<span class="c1">// When round changed</span>
<span class="n">TGASDK</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">UpdateUserStateDetailedOnly</span><span class="o">(</span><span class="s">"Round 2"</span><span class="o">);</span>
</code></pre>
<table>
<tr>
    <td width="20%"> <img src="images/integrations/unitycsharp/image5.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image4.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image2.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image1.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image3.png"/> </td>
</tr>
<tr>
    <td><small>Default state for logged-in student </small></td>
    <td><small>Student is in main menu </small></td>
    <td><small>Student is in settings menu</small></td>
    <td><small>Student is playing singleplayer game, Tutorial Level 4 has been passed for detailed state</small></td>
    <td><small>Student is playing multiplayer game, Round number is being passed to detailed state when round changes</small></td>
</tr>
</table>

<h2 id="handling-foreground-background-transitions-on-android">Handling foreground - background transitions on android</h2>

<p>On android you should call:
<code class="prettyprint">TGASDK.TGA.HandleApplicationToBackground()</code>
when your application goes to background (for example in your Activity’s <code class="prettyprint">onStop()</code>) and
<code class="prettyprint">TGASDK.TGA.HandleApplicationToForeground()</code>
when your application returns to foreground. These stop and restart the thread sending keepalive status messages. If <code class="prettyprint">HandleApplicationToBackground</code> is not called the thread will keep running and analytics will show the app as active even if it is on the background (for example when user has pressed home key).</p>

<h2 id="getting-data">Getting Data</h2>
<pre class="highlight java tab-java"><code><span class="c1">// Login information</span>
<span class="c1">// Get logged in user class ID</span>
<span class="n">TGASDK</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">getClassId</span><span class="o">()</span>
<span class="c1">// Get logged in user student ID</span>
<span class="n">TGASDK</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">getStudentId</span><span class="o">()</span>
<span class="c1">// Logs user out of TGA.</span>
<span class="n">TGASDK</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">Logout</span><span class="o">()</span>
<span class="c1">// Sets classid &amp; studentid but skips authentication. Use with care.</span>
<span class="n">TGASDK</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">SetTGAIds</span><span class="o">(</span><span class="n">studentId</span><span class="o">,</span> <span class="n">classId</span><span class="o">)</span>

<span class="c1">// Creatubbles</span>
<span class="c1">// Returns true if teacher account is linked to creatubbles.</span>
<span class="n">TGASDK</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">isCreatubblesLinked</span><span class="o">()</span>
<span class="c1">// Gets student creatubbles token, if available.</span>
<span class="n">TGASDK</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">getCreatubblesToken</span><span class="o">()</span>
<span class="c1">// Gets creatubbles gallery ID where creation needs to be submitted.</span>
<span class="n">TGASDK</span><span class="o">.</span><span class="na">TGA</span><span class="o">.</span><span class="na">getCreatubblesGalleryId</span><span class="o">()</span>
</code></pre>
<p>There is some useful data you can get inside the <code class="prettyprint">TGASDK&lt;gamename&gt;</code> class, like current logged in user class ID, studentID, if user is logged in or creatubbles tokens (if teacher account is linked to Creatubbles). On the right you can find the most useful ones (but you can also open the <code class="prettyprint">TGASDK&lt;gamename&gt;.java</code> file and check the class TGA to find all variables and methods available).</p>

          <h1 id="node-js-sdk">Node.js SDK</h1>

<p>Analytics sdk integration instructions for node.js based web applications.</p>

<h2 id="first-steps">First Steps</h2>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// Require example</span>
<span class="kd">var</span> <span class="nx">TG</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="err">“</span><span class="p">.</span><span class="o">/</span><span class="nx">TGASDK</span><span class="o">&lt;</span><span class="nx">gamename</span><span class="o">&gt;</span><span class="p">.</span><span class="nx">js</span><span class="err">”</span><span class="p">);</span>
</code></pre>
<ol>
<li>TeacherGaming will send you a <code class="prettyprint">TGASDK&lt;gamename&gt;.zip</code> archive.</li>
<li>Copy the following files to their respective folders:

<ul>
<li>tgnodejs-client.min.js <client side></li>
<li>tgnodejs.min.css <stylesheet for the dialog></li>
<li>TGASDK<gamename>.js <server side></li>
</ul></li>
<li>Link/require each file wherever you are going to use them</li>
<li>Install the cookies node module with following command: 

<ul>
<li><code class="prettyprint">npm install cookies</code></li>
<li>You also need to require the cookies node module in the same file where your /tgapi route will exist</li>
</ul></li>
</ol>

<h2 id="student-login-logout">Student Login/Logout</h2>

<p>As TeacherGaming Desk analytics (TGA) requires the game to send a Class ID and a Student ID for each user playing the game to assign data for right user, users need to login before data can be sent.</p>

<p>Logging in can be done through the TeacherGaming App (TG App) or in game. If users authenticate in game you will need to add a button which will open a login dialog.</p>

<h3 id="automatically-logging-in-with-tg-app">Automatically Logging in with TG App</h3>
<pre class="highlight plaintext"><code>Example: 

https://&lt;origin&gt;?classid=example&amp;studentid=example
</code></pre>
<p>Client side of the SDK handles the automatic login completely so you don’t need to do anything else except ensure that client side code has been required on client side. TG App will send Class ID and Student ID as url parameters.</p>

<h3 id="manual-login-logout">Manual Login/Logout</h3>

<p>Manual login is secondary option for students that didn’t login through TG App. Client side code has a login dialog. You need to create a button that calls the following function when clicked:</p>

<p><code class="prettyprint">TG.createDialog();</code></p>

<p>This will show up the dialog to user. It will show either login fields if user is not logged in or info page with logout button if user is logged in.</p>

<h4 id="validating-login-logout">Validating login/logout</h4>

<p>Server side of the SDK will validate login/logout and send it to TGA. You will however need to pass the login/logout parameters to the server side of the SDK through a route. You will also need to pass the response from the login/logout back to the client side inside the callback.</p>

<h4 id="route-example">Route Example</h4>

<p>Example is done in Meteor-framework.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">Router</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">'tgapi'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cookies</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cookies</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>

    <span class="nx">TG</span><span class="p">[</span><span class="o">*</span><span class="nx">action</span> <span class="nx">parameter</span><span class="o">*</span><span class="p">](</span><span class="o">*</span><span class="nx">query</span> <span class="nx">parameters</span> <span class="nx">obj</span><span class="o">*</span><span class="p">,</span> <span class="nx">cookies</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// WRITEHEAD</span>
        <span class="c1">// SEND RESPONSE</span>
    <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<h4 id="cookies">Cookies</h4>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">cookies</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cookies</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">);</span>
</code></pre>
<p>This SDK uses cookies node module to store credentials. These cookies will expire in 48hrs. <em>To enable the cookies you need to create new cookies instance inside the tgapi/ and pass it to the functions. You need to pass the routes request and response to the cookies instance.</em></p>

<h4 id="client-side">Client side</h4>

<p>Client side will pass the Class ID and Student ID as url parameters to tgapi/ route which you will need to catch. </p>

<p>Client will send parameters from dialog to following url: 
<code class="prettyprint">&lt;origin&gt;/tgapi?action=login&amp;classid=&lt;classid&gt;&amp;studentid=&lt;studentid&gt;</code></p>

<h2 id="sending-events-client-only">Sending Events (client only)</h2>

<p>The events that have been defined in TGA website are generated to the SDK and can be used to send data from the game to TGA. </p>

<h3 id="sending-events-with-duration">Sending Events with Duration</h3>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// Examples:</span>

<span class="c1">// Start:</span>
<span class="nx">TG</span><span class="p">.</span><span class="nx">exampleEvent</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>

<span class="c1">// Send:</span>
<span class="nx">TG</span><span class="p">.</span><span class="nx">exampleEvent</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">param1</span><span class="p">,</span> <span class="nx">param2</span><span class="p">);</span>
</code></pre>
<p>This is useful to start an event and send it to TeacherGaming Desk when it’s ready. Our SDK automatically counts time from beginning to end and appends duration to sent data. When sending the event you need to pass the needed parameters to the function, otherwise it will throw an error and no event will be sent.
To start the event, call <code class="prettyprint">TG.&lt;EventName&gt;.start()</code>
Now you can gather all needed data for the event. 
To send the event, call <code class="prettyprint">TG.&lt;EventName&gt;.send(*data parameters*)</code></p>

<h3 id="sending-events-without-duration">Sending Events without Duration</h3>

<p>If event is something which you cannot track duration of just call <code class="prettyprint">TG.&lt;EventName&gt;.send()</code> with the parameters.</p>

<h2 id="updating-state-client-only">Updating State (client only)</h2>

<p>See <a href="#updating-state2.4.">2.4. UPDATING STATE</a>.</p>

<p>Updating state can be done using the following function:
<code class="prettyprint">TG.updateState(“state”, detailed);</code></p>

<p>The detailed-parameter is a boolean. </p>

<p>If it is set to false, function sets the state showing below student name in teacher dashboard. It also resets detailed state showing below this state, if there was any.</p>

<p>If set to true, function sets the detailed state that shows below basic state</p>

<p>You can keep the state update calls in your game and don’t need to check if user is logged in to TGA, we will automatically check inside the function calls if player is currently authenticated to TGA and send the state update only if so.</p>

<h3 id="state-examples">State examples</h3>
<pre class="highlight javascript tab-javascript"><code><span class="nx">TG</span><span class="p">.</span><span class="nx">updateState</span><span class="p">(</span><span class="s2">"In Main Menu"</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">TG</span><span class="p">.</span><span class="nx">updateState</span><span class="p">(</span><span class="s2">"In Settings Menu"</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="nx">TG</span><span class="p">.</span><span class="nx">updateState</span><span class="p">(</span><span class="s2">"Playing Singleplayer Game"</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nx">TG</span><span class="p">.</span><span class="nx">updateState</span><span class="p">(</span><span class="s2">"Tutorial Level 4"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// When game begun</span>
<span class="nx">TG</span><span class="p">.</span><span class="nx">updateState</span><span class="p">(</span><span class="s2">"Playing Multiplayer Game"</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="c1">// When round changed</span>
<span class="nx">TG</span><span class="p">.</span><span class="nx">updateState</span><span class="p">(</span><span class="s2">"Round 2"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</code></pre>
<table>
<tr>
    <td width="20%"> <img src="images/integrations/unitycsharp/image5.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image4.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image2.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image1.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image3.png"/> </td>
</tr>
<tr>
    <td><small>Default state for logged-in student </small></td>
    <td><small>Student is in main menu </small></td>
    <td><small>Student is in settings menu</small></td>
    <td><small>Student is playing singleplayer game, Tutorial Level 4 has been passed for detailed state</small></td>
    <td><small>Student is playing multiplayer game, Round number is being passed to detailed state when round changes</small></td>
</tr>
</table>

          <h1 id="manual-integration-and-http-api">Manual Integration and HTTP API</h1>

<p>This document describes how to manually integrate your game with TeacherGaming Desk without using a ready-made SDK.</p>

<p>The document is divided into use cases. First we describe and give examples on how to handle automatic login e.g. login parameters coming in from the TeacherGaming App. After that we describe the HTTP API you can use to communicate with TeacherGaming Desk. When integrating with TeacherGaming Desk basically you just send data to our REST API through standard HTTPS calls. All data passed needs to be inside the GET query string. Note that for compatibility with special characters, you are always required to URL encode all data sent to our API.</p>

<h2 id="in-game-flow">In-game Flow</h2>

<ol>
<li>User login

<ul>
<li>Successful login needs to be done before any data can be sent to TeacherGaming Desk (except anonymous event data)</li>
</ul></li>
<li>Start calling playing game once every 60 seconds

<ul>
<li>After login is successful. This will inform the TeacherGaming Desk system that the user is currently playing the game and the user can be tracked. Also the TeacherGaming Desk Teacher Dashboard shows that the user is currently playing the game.</li>
</ul></li>
<li>Update player state as it changes in game

<ul>
<li>This information will be shown on the Teacher Dashboard on the TeacherGaming Desk website so that the Teacher can easily see what the students are currently doing in game.</li>
</ul></li>
<li>Send event data

<ul>
<li>Events and the data in them have been set up on the TeacherGaming Desk website by TeacherGaming. This is the data that is needed to track student progress.</li>
</ul></li>
</ol>

<h2 id="student-login">Student Login</h2>

<h3 id="manual-authentication-login">Manual Authentication / Login</h3>

<p>Login a student to our system. Class id is unique throughout the whole system and student id is unique throughout the class the user is in. Student id can be thought as an username and class id as a password.</p>

<h3 id="http-request">HTTP Request</h3>

<h4 id="url">URL</h4>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/validate</code></p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>classid</td>
<td></td>
<td>TeacherGaming Desk Class ID</td>
</tr>
<tr>
<td>studentid</td>
<td></td>
<td>TeacherGaming Desk studentid</td>
</tr>
<tr>
<td>apikey</td>
<td></td>
<td>Your game&rsquo;s API key</td>
</tr>
</tbody></table>

<aside class="info">
Your API key has been provided to you by TeacherGaming or hardcoded to your SDK.
</aside>

<h4 id="response">response</h4>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Student with this ID exists in this class."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06-13T07:08:47.763Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"debug"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"sent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-15T12:05:35.722Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"container"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zo5jajsD99beDQyt7-pv0n"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"login_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Logged into class &lt;classid&gt; with studentid &lt;studentid&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"login_message_html"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Logged into class &lt;b&gt;classid&lt;/b&gt; with studentid &lt;b&gt;studentid&lt;/b&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"subscription_expired"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"subscription_expired_message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Your subscription has expired."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"student"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"studentid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;studentid&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"studentid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;HashedUniqueStudentID&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_account"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"teacher_creatubbles_linked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="s2">"class"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"classid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;classid&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"classid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;HashedUniqueClassID&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"allow_student_signup"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"game_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;game’s name&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>1 for successful login, 0 for failed login</td>
</tr>
<tr>
<td>message</td>
<td>Detailed information about the login result.</td>
</tr>
<tr>
<td>debug</td>
<td>Debug information</td>
</tr>
<tr>
<td>responseCreatedAt</td>
<td>Datetime when reponse was created</td>
</tr>
<tr>
<td>login_message</td>
<td>login message that can be displayed to user on successful login</td>
</tr>
<tr>
<td>login_message_html</td>
<td>same as above but with html bold tags in id’s</td>
</tr>
<tr>
<td>subscription_expired</td>
<td>true if TeacherGaming Desk subscription is expired otherwise false</td>
</tr>
<tr>
<td>subscription_expired_message</td>
<td>Message that can be displayed to user if subscription has expired</td>
</tr>
<tr>
<td>student</td>
<td>studentid of the logged in student, SHA256 hash of this id, boolean of whether account was created and boolean of whether teacher has linked creatubbles</td>
</tr>
<tr>
<td>class</td>
<td>classid  of the logged in student, SHA256 hash of this id and boolean of whether student self signup is allowed</td>
</tr>
<tr>
<td>game_name</td>
<td>name of the game student logged in</td>
</tr>
</tbody></table>

<h4 id="example-usage">Example usage</h4>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/validate?studentid=johndoe&amp;classid=democlass&amp;apikey=K8SaQRDsSFdFt5zFthTy</code></p>

<h3 id="authentication-login-through-teachergaming-app">Authentication / Login through TeacherGaming App</h3>

<p>To support automatic login you need to handle the login parameters being given to your game by the TeacherGaming App. On Android this is done by using Intent (when app is not already running) and Broadcast (when app is running) parameters. On iOS this is done using a URL scheme. We are planning to change both mobile platforms to use the URL scheme in the future. On desktop latforms the login parameters are passed as command line paramters when starting the game.</p>

<h4 id="intent-login">Intent Login</h4>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Example code for handling the login intent from TeacherGaming App in an Android game.</span>
<span class="c1">// Example is in Unity and C# but you can adapt it for your language &amp; engine.</span>

<span class="c1">// Intent login at App Start (Unity C# code)</span>
<span class="c1">// This function is run from a Start() in Monobehaviour.</span>

<span class="k">private</span> <span class="kt">bool</span> <span class="nf">TryLoginFromAndroidIntent</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// Get the class, activity (context) and intent from unity android side</span>
<span class="cp">#if UNITY_ANDROID &amp;&amp; !UNITY_EDITOR
</span>    <span class="n">AndroidJavaClass</span> <span class="n">javaClass</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">AndroidJavaClass</span><span class="p">(</span><span class="s">"com.unity3d.player.UnityPlayer"</span><span class="p">);</span>
    <span class="n">AndroidJavaObject</span> <span class="n">context</span> <span class="p">=</span> <span class="n">javaClass</span><span class="p">.</span><span class="n">GetStatic</span><span class="p">&lt;</span><span class="n">AndroidJavaObject</span><span class="p">&gt;(</span><span class="s">"currentActivity"</span><span class="p">);</span>
    <span class="n">AndroidJavaObject</span> <span class="n">intent</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">Call</span><span class="p">&lt;</span><span class="n">AndroidJavaObject</span><span class="p">&gt;(</span><span class="s">"getIntent"</span><span class="p">);</span>

    <span class="c1">// Check if intent has TeacherGaming Desk login related extras</span>
    <span class="kt">bool</span> <span class="n">hasClassId</span> <span class="p">=</span> <span class="n">intent</span><span class="p">.</span><span class="n">Call</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;(</span><span class="s">"hasExtra"</span><span class="p">,</span> <span class="s">"TGA-classid"</span><span class="p">);</span>
    <span class="kt">bool</span> <span class="n">hasStudentId</span> <span class="p">=</span> <span class="n">intent</span><span class="p">.</span><span class="n">Call</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;(</span><span class="s">"hasExtra"</span><span class="p">,</span> <span class="s">"TGA-studentid"</span><span class="p">);</span>
    <span class="kt">bool</span> <span class="n">hasCommand</span> <span class="p">=</span> <span class="n">intent</span><span class="p">.</span><span class="n">Call</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;(</span><span class="s">"hasExtra"</span><span class="p">,</span> <span class="s">"TGA-command"</span><span class="p">);</span>
    <span class="kt">string</span> <span class="n">command</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span>
    <span class="kt">string</span> <span class="k">class</span><span class="nc">Id</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span>
    <span class="kt">string</span> <span class="n">studentId</span> <span class="p">=</span> <span class="s">""</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">hasCommand</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">command</span> <span class="p">=</span> <span class="n">intent</span><span class="p">.</span><span class="n">Call</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"getStringExtra"</span><span class="p">,</span> <span class="s">"TGA-command"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">hasClassId</span> <span class="p">&amp;&amp;</span> <span class="n">hasStudentId</span> <span class="p">&amp;&amp;</span> <span class="p">(!</span><span class="n">hasCommand</span> <span class="p">||</span> <span class="n">command</span> <span class="p">==</span> <span class="s">"login"</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="k">class</span><span class="nc">Id</span> <span class="p">=</span> <span class="n">intent</span><span class="p">.</span><span class="n">Call</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"getStringExtra"</span><span class="p">,</span> <span class="s">"TGA-classid"</span><span class="p">);</span>
        <span class="n">studentId</span> <span class="p">=</span> <span class="n">intent</span><span class="p">.</span><span class="n">Call</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"getStringExtra"</span><span class="p">,</span> <span class="s">"TGA-studentid"</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">class</span><span class="nc">Id</span> <span class="p">!=</span> <span class="s">""</span> <span class="p">&amp;&amp;</span> <span class="n">studentId</span> <span class="p">!=</span> <span class="s">""</span> <span class="p">&amp;&amp;</span> <span class="k">class</span><span class="nc">Id</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">studentId</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span>
          <span class="k">class</span><span class="nc">Id</span> <span class="p">!=</span> <span class="s">"null"</span> <span class="p">&amp;&amp;</span> <span class="n">studentId</span> <span class="p">!=</span> <span class="s">"null"</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// Got class id &amp; student id &amp; commanded to login. Start login process.</span>
            <span class="c1">// CALL LOGIN CODE HERE</span>
            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="cp">#else
</span>    <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
<span class="cp">#endif
</span><span class="p">}</span>
</code></pre>
<p>Intent is an abstract description of an operation to be performed used in Android applications. Intent can also contain key value pair extras, which can be used to send data internally in app or externally to another app. For the case where the game is not running yet, the TeacherGaming App simply starts the app using an intent that contains the class id and student id as extras.</p>

<p>Keys and values used in TeacherGaming App intents</p>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>TGA-classid</td>
<td>User’s Class ID. Not needed if not logging in.</td>
</tr>
<tr>
<td>TGA-studentid</td>
<td>User’s Student ID. Not needed if not logging in.</td>
</tr>
<tr>
<td>TGA-command</td>
<td>&ldquo;login&rdquo; or &ldquo;logout&rdquo; Do we login or logout.</td>
</tr>
</tbody></table>

<p>When using a TGA SDK all of this is handled automatically. However when there is no TGA SDK available for the engine you are using (and you are using the HTTP API directly) or you for some other reason need to implement this yourself you can refer to the examples on the right for help.</p>

<p>If you are unfamiliar with Android development and wish to know more about intents, please refer to the Android documentation: <a href="https://developer.android.com/reference/android/content/Intent.html">https://developer.android.com/reference/android/content/Intent.html</a></p>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Receiving broadcasts</span>
<span class="c1">// Unity C# code</span>
<span class="k">void</span> <span class="nf">OnApplicationPause</span><span class="p">(</span><span class="kt">bool</span> <span class="n">paused</span><span class="p">)</span> 
<span class="p">{</span>
    <span class="n">AndroidJavaClass</span> <span class="n">tgaReceiver</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">AndroidJavaClass</span><span class="p">(</span><span class="s">"com.teachergaming.tgareceiver.TGABroadcastReceiver"</span><span class="p">);</span>
    <span class="n">tgaReceiver</span><span class="p">.</span><span class="nf">CallStatic</span><span class="p">(</span><span class="s">"createInstance"</span><span class="p">);</span>

    <span class="c1">// Get static variables from plugin</span>
    <span class="kt">string</span> <span class="n">receivedClassID</span> <span class="p">=</span> <span class="n">tgaReceiver</span><span class="p">.</span><span class="n">GetStatic</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"classId"</span><span class="p">);</span>
    <span class="kt">string</span> <span class="n">receivedStudentID</span> <span class="p">=</span> <span class="n">tgaReceiver</span><span class="p">.</span><span class="n">GetStatic</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;(</span><span class="s">"studentId"</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">receivedClassID</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">receivedStudentID</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// login code here ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre><pre class="highlight java tab-java"><code><span class="c1">// Android Java code for BroadcastReceiver</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TGABroadcastReceiver</span> <span class="kd">extends</span> <span class="n">BroadcastReceiver</span> <span class="o">{</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">classId</span><span class="o">;</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">studentId</span><span class="o">;</span>

   <span class="kd">public</span> <span class="nf">TGABroadcastReceiver</span><span class="o">()</span> <span class="o">{</span>
   <span class="o">}</span>

   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onReceive</span><span class="o">(</span><span class="n">Context</span> <span class="n">context</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">intent</span><span class="o">)</span>
   <span class="o">{</span>
       <span class="n">String</span> <span class="n">receivedClassId</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"TGA-classid"</span><span class="o">);</span>
       <span class="n">String</span> <span class="n">receivedStudentId</span> <span class="o">=</span> <span class="n">intent</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"TGA-studentid"</span><span class="o">);</span>

       <span class="k">if</span> <span class="o">(</span><span class="n">receivedClassId</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">receivedStudentId</span> <span class="o">!=</span> <span class="kc">null</span>
               <span class="o">&amp;&amp;</span> <span class="n">receivedClassId</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">receivedStudentId</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
       <span class="o">{</span>
           <span class="n">classId</span> <span class="o">=</span> <span class="n">receivedClassId</span><span class="o">;</span>
           <span class="n">studentId</span> <span class="o">=</span> <span class="n">receivedStudentId</span><span class="o">;</span>
       <span class="o">}</span>
       <span class="k">else</span>
       <span class="o">{</span>
           <span class="n">classId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
           <span class="n">studentId</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
       <span class="o">}</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight xml tab-xml"><code><span class="c">&lt;!--AndroidManifest for the receiver--&gt;</span>
<span class="c">&lt;!--You need to add this part to your AndroidManifest.xml file to support the broadcast receiver:--&gt;</span>
<span class="nt">&lt;receiver</span>
    <span class="na">android:name=</span><span class="s">".TGABroadcastReceiver"</span>
    <span class="na">android:enabled=</span><span class="s">"true"</span>
    <span class="na">android:exported=</span><span class="s">"true"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;intent-filter&gt;</span>
        <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"com.teachergaming.com.TGAbroadcast"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/intent-filter&gt;</span>
<span class="nt">&lt;/receiver&gt;</span>
</code></pre>
<h4 id="broadcast-login-while-game-is-running">Broadcast login (while game is running)</h4>

<p>When the game is running intents can be received via broadcast. Receiving broadcasts requires a BroadcastReceiver. Implementation may differ depending on the engine you are using for your game.</p>

<p>TGA Unity SDK uses an Android plugin for receiving broadcasts.</p>

<h4 id="testing-with-teachergaming-app">Testing with TeacherGaming App</h4>

<ol>
<li>Install the app from google play: https://play.google.com/store/apps/details?id=com.teachergaming.com&amp;hl=en
(or search: TeacherGaming)</li>
<li>Open the TeacherGaming Application on your device</li>
<li>Press “Login to Analytics” button at the top of the screen</li>
<li>Tap the laptop image 10 times at the top of the screen A new menu will open where you can input the following information:

<ul>
<li>Your game package name, for example: com.FiveMoreMinutes.SwitchAndGlitch</li>
<li>Class ID</li>
<li>Student ID</li>
<li>Press “Launch” and the TeacherGaming App will run your game and send given id’s to it.</li>
</ul></li>
</ol>
<pre class="highlight plaintext"><code>Example URI scheme for testing login:
com.teachergaming.switchandglitch://?classid=5mm&amp;userid=marko&amp;command=login
</code></pre>
<p>On iOS the app is launched using the URI scheme
<code class="prettyprint">&lt;your app bundle identifier&gt;://?classid=&lt;class id&gt;&amp;studentid=&lt;student id&gt;&amp;command=&lt;login/logout&gt;</code></p>

<p>For how to handle URL schemes on iOS see the relevant documentation for your programming language/engine/platform.</p>

<h2 id="check-class">Check class</h2>

<p>Can be used to check if a class with a given class id exists in the system.</p>

<h3 id="http-request">HTTP Request</h3>

<h4 id="url">URL</h4>

<p>https://analyticsdata.teachergaming.com/api/check_class</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>apikey</td>
<td>Api key of your game</td>
</tr>
<tr>
<td>classid</td>
<td>TeacherGaming Desk class id</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Class check successfull, class found with this id."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06-13T07:10:16.249Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"debug"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"sent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-15T12:05:35.722Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"container"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zo5jajsD99beDQyt7-pv0n"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"class"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"classid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;classid&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"class_exists"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"classid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;HashedUniqueClassID&gt;"</span><span class="w">
    </span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>1 for success, 0 for fail.</td>
</tr>
<tr>
<td>message</td>
<td>Detailed information about the result</td>
</tr>
<tr>
<td>debug</td>
<td>Debug information</td>
</tr>
<tr>
<td>responseCreatedAt</td>
<td>Datetime when reponse was created</td>
</tr>
<tr>
<td>class</td>
<td>Described in the following table</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>classid</td>
<td>The class id (same as the one given as parameter)</td>
</tr>
<tr>
<td>class_exists</td>
<td>True if class exists, false if not</td>
</tr>
<tr>
<td>classid_unique</td>
<td>Unique id of the class</td>
</tr>
</tbody></table>

<h4 id="example-usage">Example Usage</h4>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/check_class?classid=democlass&amp;apikey=K8SaQRDsSFdFt5zFthTy</code></p>

<h2 id="playing-game-keep-alive">Playing Game (keep alive)</h2>

<p>Inform TeacherGaming Desk that the user is currently logged in and playing. Send once every minute. If TeacherGaming Desk does not receive this request for 3 minutes it will deduce that the student has quit the game and log him out.</p>

<h3 id="http-request">HTTP Request</h3>

<h4 id="url">URL</h4>

<p>https://analyticsdata.teachergaming.com/api/playing_game</p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>classid</td>
<td>TeacherGaming Desk class id</td>
</tr>
<tr>
<td>studentid</td>
<td>TeacherGaming Desk id of the student in the class</td>
</tr>
<tr>
<td>apikey</td>
<td>Api key of your game</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Student playtime added"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06-13T07:10:16.249Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"debug"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"sent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-15T12:05:35.722Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"container"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zo5jajsD99beDQyt7-pv0n"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"game_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;game’s name&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"class"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"classid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;classid&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"classid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;HashedUniqueClassID&gt;"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"student"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"studentid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;studentid&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"studentid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;HashedUniqueStudentID&gt;"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>1 for success, 0 for fail.</td>
</tr>
<tr>
<td>message</td>
<td>Detailed information about the result</td>
</tr>
<tr>
<td>debug</td>
<td>Debug information</td>
</tr>
<tr>
<td>responseCreatedAt</td>
<td>Datetime when reponse was created</td>
</tr>
<tr>
<td>game_name</td>
<td>Name of the game the student is logged in</td>
</tr>
<tr>
<td>student</td>
<td>studentid of the logged in student and SHA256 hash of this id</td>
</tr>
<tr>
<td>class</td>
<td>classid  of the logged in student and SHA256 hash of this id</td>
</tr>
</tbody></table>

<h4 id="example-usage">Example Usage</h4>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/playing_game?studentid=johndoe&amp;classid=democlass&amp;apikey=K8SaQRDsSFdFt5zFthTy</code></p>

<h2 id="player-state">Player State</h2>

<p>Inform TeacherGaming Desk what the user is currently doing in game.
Separate calls for State and Detailed State.
For example: State = Playing Game, Detailed State = Level 1</p>

<h3 id="http-request">HTTP Request</h3>

<h4 id="url">URL</h4>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/update_state</code></p>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/update_state_detailed</code></p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>classid</td>
<td>TeacherGaming Desk class id</td>
</tr>
<tr>
<td>studentid</td>
<td>TeacherGaming Desk id of the student in the class</td>
</tr>
<tr>
<td>apikey</td>
<td>Api key of your game</td>
</tr>
<tr>
<td>state</td>
<td>What the user is currently doing</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">IF</span><span class="w"> </span><span class="err">CALLING</span><span class="w"> </span><span class="err">STATE</span><span class="p">:</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Student state updated to: &lt;newstate&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">IF</span><span class="w"> </span><span class="err">CALLING</span><span class="w"> </span><span class="err">DETAILED</span><span class="w"> </span><span class="err">STATE</span><span class="p">:</span><span class="w"> 
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Student detailed state updated to: &lt;newdetailedstate&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06-13T07:12:46.311Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"debug"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"sent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-15T12:05:35.722Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"container"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zo5jajsD99beDQyt7-pv0n"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"game_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;game’s name&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">IF</span><span class="w"> </span><span class="err">CALLING</span><span class="w"> </span><span class="err">STATE</span><span class="p">:</span><span class="w">
    </span><span class="s2">"new_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;newstate&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">IF</span><span class="w"> </span><span class="err">CALLING</span><span class="w"> </span><span class="err">DETAILED</span><span class="w"> </span><span class="err">STATE</span><span class="p">:</span><span class="w">
    </span><span class="s2">"new_detailed_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;newstatedetailed&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"class"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"classid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;classid&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"classid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;HashedUniqueClassID&gt;"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"student"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"studentid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;studentid&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"studentid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;HashedUniqueStudentID&gt;"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>1 for success, 0 for fail.</td>
</tr>
<tr>
<td>message</td>
<td>Detailed information about the result + state sent to method</td>
</tr>
<tr>
<td>debug</td>
<td>Debug information</td>
</tr>
<tr>
<td>responseCreatedAt</td>
<td>Datetime when reponse was created</td>
</tr>
<tr>
<td>game_name</td>
<td>name of the game student logged in</td>
</tr>
<tr>
<td>new_state</td>
<td></td>
</tr>
<tr>
<td>new_detailed_state</td>
<td>State that was sent to method in a more detailed form</td>
</tr>
<tr>
<td>student</td>
<td>studentid of the logged in student and SHA256 hash of this id</td>
</tr>
<tr>
<td>class</td>
<td>classid  of the logged in student and SHA256 hash of this id</td>
</tr>
</tbody></table>

<h4 id="example-usage">Example Usage</h4>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/update_state?studentid=johndoe&amp;classid=democlass&amp;apikey=K8SaQRDsSFdFt5zFthTy&amp;state=Playing game</code></p>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/update_state_detailed?studentid=johndoe&amp;classid=democlass&amp;apikey=K8SaQRDsSFdFt5zFthTy&amp;state=Level 1</code></p>

<h2 id="event-data">Event Data</h2>

<p>Send event data to TeacherGaming Desk. The events and needed data for your game can be seen on the Events page on the TeacherGaming Desk website. Event data can also be sent anonymously without classid or userid.</p>

<h3 id="http-request">HTTP Request</h3>

<h4 id="url">URL</h4>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/track</code>
or anonymous
<code class="prettyprint">https://analyticsanon.teachergaming.com/api/track</code></p>

<h4 id="parameters">Parameters</h4>

<h5 id="required">Required</h5>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>apikey</td>
<td>Api key of your game</td>
</tr>
<tr>
<td>eventname</td>
<td>The event name that you are submitting data for.</td>
</tr>
</tbody></table>

<h5 id="optional">Optional</h5>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>classid</td>
<td>TeacherGaming Desk class id</td>
</tr>
<tr>
<td>studentid</td>
<td>TeacherGaming Desk id of the student in the class</td>
</tr>
<tr>
<td>duration</td>
<td>How long it took to complete the event in milliseconds.</td>
</tr>
<tr>
<td>Optional data</td>
<td>Optional event data for your event is passed in key=value pairs. This is the data that has been set by TeacherGaming for each Event that is tracked in your game Examples: levelID=JungleLevel3 Score=3</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Event tracked succesfully."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06-13T07:21:44.594Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"debug"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"sent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-15T12:05:35.722Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"container"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zo5jajsD99beDQyt7-pv0n"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"game_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;game’s name&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;eventname&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"student"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"studentid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;studentid&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"studentid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;HashedUniqueStudentID&gt;"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"class"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"classid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;classid&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"classid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;HashedUniqueClassID&gt;"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>1 for success, 0 for fail.</td>
</tr>
<tr>
<td>message</td>
<td>Detailed information about the result</td>
</tr>
<tr>
<td>debug</td>
<td>Debug information</td>
</tr>
<tr>
<td>responseCreatedAt</td>
<td>Datetime when reponse was created</td>
</tr>
<tr>
<td>game_name</td>
<td>name of the game student logged in</td>
</tr>
<tr>
<td>event</td>
<td>name of the event that is being tracked</td>
</tr>
<tr>
<td>student</td>
<td>studentid of the logged in student and SHA256 hash of this id</td>
</tr>
<tr>
<td>class</td>
<td>classid  of the logged in student and SHA256 hash of this id</td>
</tr>
<tr>
<td>data</td>
<td>All of the additional data fields sent to method</td>
</tr>
<tr>
<td>duration</td>
<td>Duration of the event, sent to method</td>
</tr>
</tbody></table>

<h4 id="example-usage">Example Usage</h4>

<p>This is the LevelComplete event in Switch &amp; Glitch
<code class="prettyprint">https://analyticsdata.teachergaming.com/api/track?apikey=K8SaQRDsSFdFt5zFthTy&amp;studentid=johndoe&amp;classid=democlass&amp;eventname=LevelComplete&amp;GameType=Network&amp;LevelId=Level1&amp;TileCount=20&amp;FailedTileCount=-1&amp;SuccessTileCount=3&amp;CommitCount=1&amp;Score=101&amp;duration=17389</code></p>

<h2 id="student-logout">Student Logout</h2>

<p>You can allow student to log out of TeacherGaming Desk only if your game is not subscription based. Logging out stops all student specific interactions with TeacehrGaming Desk.</p>

<h3 id="http-request">HTTP Request</h3>

<h4 id="url">URL</h4>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/logout_student</code></p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>classid</td>
<td>TeacherGaming Desk class id</td>
</tr>
<tr>
<td>studentid</td>
<td>TeacherGaming Desk id of the student in the class</td>
</tr>
<tr>
<td>apikey</td>
<td>Api key of your game</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Student logged out"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06-13T06:56:25.169Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"debug"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"sent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-03-15T12:05:35.722Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"container"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zo5jajsD99beDQyt7-pv0n"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"game_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;game’s name&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"class"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"classid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;classid&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"classid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;HashedUniqueClassID&gt;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"student"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"studentid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;studentid&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"studentid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;HashedUniqueStudentID&gt;"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>1 for success, 0 for fail.</td>
</tr>
<tr>
<td>message</td>
<td>Detailed information about the result</td>
</tr>
<tr>
<td>debug</td>
<td>Debug information</td>
</tr>
<tr>
<td>responseCreatedAt</td>
<td>Datetime when reponse was created</td>
</tr>
<tr>
<td>game_name</td>
<td>Name of the game student logged out of</td>
</tr>
<tr>
<td>student</td>
<td>studentid of the logged out student and SHA256 hash of this id</td>
</tr>
<tr>
<td>class</td>
<td>classid of the logged out student and SHA256 hash of this id</td>
</tr>
</tbody></table>

<h4 id="example-usage">Example Usage</h4>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/logout_student?studentid=johndoe&amp;classid=democlass&amp;apikey=K8SaQRDsSFdFt5zFthTy</code></p>

          <h1 id="oauth">oAuth</h1>

<p>Desk works as oAuth 2 identity provider server. To gain access to these features, please contact us to get your <code class="prettyprint">client_id</code> and <code class="prettyprint">client_secret</code> generated for you.</p>

<p>In a nutshell:</p>

<ol>
<li>Request your <code class="prettyprint">client_id</code> and <code class="prettyprint">client_secret</code> from TeacherGaming</li>
<li>Redirect user to login URL as mentioned in section <code class="prettyprint">Authorization</code></li>
<li>User gets redirected to your specified URL, you will get code as parameter. Call our <code class="prettyprint">Token</code> endpoint to exchange that code for access token</li>
<li>Verify that access token is correct and user is correct by calling our <code class="prettyprint">Profile</code> endpoint.</li>
</ol>

<h2 id="authorization">Authorization</h2>

<p>We currently support authorization code flow. You will need to redirect the user to our request URL and pass the additional parameters.</p>

<h3 id="request-type">Request Type</h3>

<p>GET</p>

<h3 id="url">Url</h3>

<p><code class="prettyprint">https://desk.teachergaming.com/api/oauth/authorize</code></p>

<aside class="notice">
Note that the domain here is different than most other API methods in the documentation. Make sure to copy the correct URL from here.
</aside>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>only <code class="prettyprint">code</code> allowed for now.</td>
<td><strong>true</strong></td>
</tr>
<tr>
<td>client_id</td>
<td>Your <code class="prettyprint">client_id</code>.</td>
<td><strong>true</strong></td>
</tr>
<tr>
<td>redirect_uri</td>
<td>URL where client gets redirected after succesfull login. These are whitelisted by Teachergaming.</td>
<td><strong>true</strong></td>
</tr>
<tr>
<td>student_login</td>
<td>Set to <code class="prettyprint">true</code> to login as a student. No need to include this parameter if doing teacher login, or you can pass false.</td>
<td>false</td>
</tr>
<tr>
<td>switch_teacher_student_login</td>
<td>Set to <code class="prettyprint">true</code> to allow switching between teacher and student logins.</td>
<td>false</td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>
<pre class="highlight plaintext"><code>// Example of address where user's browser gets redirected after succesfull login
https://yourRedirectUri.com?code=&lt;yourcode&gt;&amp;is_teacher=&lt;true|false&gt;
</code></pre>
<p>After succesfull login, user will be redirected back to your redirect_uri with code in GET query parameter. Use this code to fetch the access token for the user as explained in section <code class="prettyprint">Token</code>.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>Code that can be exchanged for access token.</td>
</tr>
<tr>
<td>is_teacher</td>
<td>True if logged in as a teacher, otherwise false.</td>
</tr>
</tbody></table>

<h2 id="token">Token</h2>

<p>This endpoint can be used to exchange oauth code with access token.</p>

<h3 id="request-type">Request Type</h3>

<p>GET</p>

<h3 id="url">Url</h3>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/oauth/token</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>grant_type</td>
<td>Set to <code class="prettyprint">authorization_code</code>. Required by oAuth standard.</td>
<td><strong>true</strong></td>
</tr>
<tr>
<td>code</td>
<td>Code you got from us in the <code class="prettyprint">Authorization</code> section.</td>
<td><strong>true</strong></td>
</tr>
<tr>
<td>redirect_uri</td>
<td>Exact same redirect_uri used in <code class="prettyprint">Authorization</code> section. Do not include query parameters or any extra information to this.</td>
<td><strong>true</strong></td>
</tr>
<tr>
<td>client_id</td>
<td>Your <code class="prettyprint">client_id</code>.</td>
<td><strong>true</strong></td>
</tr>
<tr>
<td>client_secret</td>
<td>Your <code class="prettyprint">client_secret</code>.</td>
<td><strong>true</strong></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<blockquote>
<p><span style="color: green">Example Success Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Token created succesfully."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-26T09:47:48.733Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;YourToken&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;ServiceName&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><span style="color: red">Example Failed Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Code not found."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns back the token that can be used to access rest of oAuth endpoints.</p>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>1 for success, 0 for failure.</td>
</tr>
<tr>
<td>access_token</td>
<td>User&rsquo;s access token.</td>
</tr>
<tr>
<td>token_type</td>
<td>Type of token. Currently only bearer.</td>
</tr>
<tr>
<td>expires_in</td>
<td>Time when token expires. 0 means token does not expire.</td>
</tr>
<tr>
<td>service</td>
<td>Your service&rsquo;s name.</td>
</tr>
</tbody></table>

<h2 id="user-profile">User Profile</h2>

<p>This endpoint returns information about the user. Requires valid token. This method is useful for verifying that the user information like email address is correct after getting token for a user.</p>

<h3 id="request-type">Request Type</h3>

<p>GET</p>

<h3 id="url">Url</h3>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/oauth/profile</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>User&rsquo;s access token</td>
<td><strong>true</strong></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<blockquote>
<p><span style="color: green">Example Teacher Success Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Profile information fetched succesfully."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-26T09:51:01.858Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isStudent"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"teacher"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;first_name&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;last_name&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;email&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unique_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;unique_id&gt;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"institution"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expired"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><span style="color: green">Example Student Success Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Profile information fetched succesfully."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-26T09:51:01.858Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isStudent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"student"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;studentname&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"studentid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;studentid&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"studentid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;studentid_unique&gt;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"class"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"class_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;classname&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"classid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;classid&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"classid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;classid_unique&gt;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"subscription"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"expired"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><span style="color: red">Example Failed Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Access token not found."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid_request"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Access token not found."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<aside class="notice">
Some values in this response are only available for teachers and some for students. See the role column for more information.
</aside>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
<th>Role</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>1 for success, 0 for failure.</td>
<td>both</td>
</tr>
<tr>
<td>isStudent</td>
<td>true if this user is student, false otherwise.</td>
<td>both</td>
</tr>
<tr>
<td>subscription</td>
<td>Information if user currently has active subscription</td>
<td>both</td>
</tr>
<tr>
<td>teacher</td>
<td>Information about the teacher</td>
<td>teacher</td>
</tr>
<tr>
<td>institution</td>
<td>Information about the institution user is part of. Can be empty if user is not part of any institution.</td>
<td>teacher</td>
</tr>
<tr>
<td>student</td>
<td>Information about the student</td>
<td>student</td>
</tr>
<tr>
<td>class</td>
<td>Information about class the student is part of</td>
<td>student</td>
</tr>
</tbody></table>

<h2 id="classes">Classes</h2>

<p>This endpoint returns the classes and students assosicated with the authorized teacher. Requires valid token. This method is useful for example for creating accounts for the students in your game.</p>

<h3 id="request-type">Request Type</h3>

<p>GET</p>

<h3 id="url">Url</h3>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/oauth/classes</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>User&rsquo;s access token.</td>
<td><strong>true</strong></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<blockquote>
<p><span style="color: green">Example Classes Success Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Teachers classes information fetched succesfully."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-08-28T14:43:51.572Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"debug"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"container"</span><span class="p">:</span><span class="w"> </span><span class="s2">"undefined"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tietokone-PC"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"classes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"classid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;classid&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"classid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;uniqueclassid&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"class_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;classname&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"students"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"studentid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;studentid&gt;"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"studentid_unique"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;unique_studentid&gt;"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><span style="color: red">Example Failed Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Access token cannot be empty."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid_request"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"error_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Access token cannot be empty."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>1 for success, 0 for failure.</td>
</tr>
<tr>
<td>message</td>
<td>Information about the request (f.e. error message)</td>
</tr>
<tr>
<td>debug</td>
<td>Debug information</td>
</tr>
<tr>
<td>classes</td>
<td>Teacher&rsquo;s classes (array of class json elements described below)</td>
</tr>
</tbody></table>

<h4 id="class-element">Class element</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>classid</td>
<td>Class id of the class. Student inputs this when logging in.</td>
</tr>
<tr>
<td>classid_unique</td>
<td>Unique id for the class. Can be used f.e. for databases. Does not change.</td>
</tr>
<tr>
<td>class_name</td>
<td>Name of the class</td>
</tr>
<tr>
<td>students</td>
<td>Students belonging to the class (array of class json elements described below)</td>
</tr>
</tbody></table>

<h4 id="student-element">Student element</h4>

<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>studentid</td>
<td>Student id. Student inputs this and the class id when logging in.</td>
</tr>
<tr>
<td>studentid_unique</td>
<td>Unique id for the student. Can be used f.e. for databases. Does not change.</td>
</tr>
</tbody></table>

<h2 id="revoke-token">Revoke Token</h2>

<p>This endpoint can be used to revoke a token.</p>

<h3 id="request-type">Request Type</h3>

<p>GET</p>

<h3 id="url">Url</h3>

<p><code class="prettyprint">https://analyticsdata.teachergaming.com/api/oauth/revoke</code></p>

<h3 id="parameters">Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>User&rsquo;s access token.</td>
<td><strong>true</strong></td>
</tr>
</tbody></table>

<h3 id="response">Response</h3>

<blockquote>
<p><span style="color: green">Example Success Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Token revoked succesfully."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"responseCreatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-26T10:03:45.218Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p><span style="color: red">Example Failed Output</span></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Access token not found."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid_request"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"error_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Access token not found."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>1 for success, 0 for failure.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
