<h1 id="general-sdk-information">General SDK Information</h1>

<h2 id="what-is-tga-sdk">What is TGA SDK</h2>

<p>TeacherGaming Desk, our learning platform, aims to demystify the processes behind game-based learning. It aims to provide educators with an easily understandable way of tracking and assessing the learning that happens in-game.</p>

<p>In more technical terms, the analytics part of TeacherGaming Desk is a web-based platform that collects analytics information (events) sent by games and processes it to reveal what the students (users, players) have learned while playing the game. The SDK for integrating the analytics is called TeacherGaming Desk Analytics SDK, or TGA SDK for short.</p>

<p>This part of the document is written for all game developers that are going to integrate TeacherGaming Desk analytics into their games. It describes how to do the integration on a general level. Integration can be done either by using a ready-made SDK for your platform, or by manually using the HTTP API. More detailed information is available in the specific parts for each SDK, easily accessed from the table of contents on the left.</p>

<h2 id="student-id-and-class-id">Student id and Class id</h2>

<p>Students are identified in TGA by their class and student ids. These are used instead of real names or similar in order to prevent outsiders (anyone except their teachers or parents etc.) from identifying individual students in the system. The class id is a system-wide unique generated alphanumeric identifier that identifies a group of students (usually a class). The student id is an alphanumeric identifier that is unique within a class, and is manually set either by a teacher in the web interface or by the student on first login if automatic generation of students has been allowed for that class.</p>

<p>TeacherGaming Desk analytics (TGA) requires the game to send a class id and a student id for each student playing the game to assign data to the right student. This means that students need to login before data can be sent, except for anonymous event data.</p>

<p>Logging in can be done through the TeacherGaming App or in the game. Implementing the automatic login through TeacherGaming App is mandatory, implementing an in-game login UI is optional. Our Unity C# SDK has a ready-made UI you can use if you are developing on Unity.</p>

<p>You should not save the class and student ids in your game. The student should need to login separately every time the app is started either through the TeacherGaming app or in the game UI.</p>

<h3 id="automatically-logging-in-from-teachergaming-app">Automatically logging in from TeacherGaming app</h3>

<p>When the user has logged in to TeacherGaming app and launches your game the TeacherGaming app passes the login information to your game to allow your game to log in automatically as it is lauched (or brought back to foreground). On Android this is done by using Intent (when app is not already running) and Broadcast (when app is running) parameters. On iOS this is done using an URI scheme. We are planning to change Android to also use the URL scheme in the future, so all new integrations on Android should support that. Support for Intent &amp; Broadcast is also needed since the TeacherGaming App still currently uses those.</p>

<p>On desktop platforms we pass the login information to the game as command line parameters.</p>

<p>The SDKs do the handling of these parameters automatically. When using an SDK all you need to do is listen to a callback (see the platform specific SDK documentation for how to do this) and react appropriately. If you are using the HTTP API you need to do the parameter handling yourself (see the HTTP API documentation and TeacherGaming app Android Intent login documentation).</p>

<p>When the student has logged in via TeacherGaming app you should not give the user the option to logout or to login as different student inside the game. Changing the student should only be done via the TeacherGaming app in this case. It is good if you still have the UI to show the class and student ids but you can leave it out if you wish. This can be the same UI you use to login inside the game just having the input fields and buttons in a disabled state disabled for example.</p>

<h4 id="testing-automatic-login-through-teachergamning-app">Testing automatic login through TeacherGamning App</h4>

<ol>
<li>Search for app called TeacherGaming on Play or App store. Install the app and launch it.</li>
<li>Press “LOGIN TO ANALYTICS” button at the top of the screen</li>
<li>Tap 10 times TG logo at the top of the screen and a new menu will appear</li>
<li>In the new menu input your game’s package name and class id and student id</li>
<li>Press “Launch”
Your game should now run and a popup should inform you about the login result.</li>
</ol>

<h4 id="testing-automatic-login-on-mobile-without-teachergaming-app">Testing automatic login on mobile without TeacherGaming app</h4>
<pre class="highlight plaintext"><code>URI:
&lt;your bundle identifier&gt;://?classid=&lt;class id&gt;&amp;studentid=&lt;student id&gt;&amp;command=&lt;login/logout&gt;

Example (in html file):

&lt;a href = "com.fivemoreminutes.switchandglitch://?classid=h1xme&amp;studentid=student1&amp;command=login"&gt; Login h1xme/student1 &lt;/a&gt;

</code></pre>
<p>Create a html file with links according to the URI scheme or input the URI in the device browser address bar.</p>

<h4 id="testing-automatic-login-on-desktop-without-teachergaming-app">Testing automatic login on desktop without TeacherGaming app</h4>
<pre class="highlight plaintext"><code>Desktop command line examples:

“Switch &amp; Glitch.exe” “com.fivemoreminutes.switchandglitch://?classid=h1xme&amp;studentid=student1&amp;command=login”

“Switch &amp; Glitch.exe” “?classid=h1xme&amp;studentid=student1&amp;command=login”

</code></pre>
<p>On desktop platforms you should test the automatic login by giving the URI on the right as a command line parameter when starting your game.</p>

<p>Replace &lt;your bundle identifier&gt; with your bundle identifier (f.e. com.teachergaming.switchandglitch) &lt;class id&gt; with a class id and &lt;student id&gt; with a student id and choose login or logout as the command. Note that on desktop you can leave the &lt;your bundle identifier&gt;:// part out in case you don’t have a bundle identifier defined. You can also leave the classid=&lt;class id&gt;&amp;studentid=&lt;student id&gt;&amp; part out if you have logout as the command. Note that you should never leave out the ? character. Note that the parameter contains special characters, so remember to put it in &ldquo;&rdquo;.</p>

<h3 id="creating-your-own-ui-for-in-game-login">Creating your own UI for in-game login</h3>

<p>For manually logging in to TGA the student needs to be able to input a class id and a student id. A good place for this UI is for example in a settings menu, or somewhere in the main menu. Usually two input fields with OK and Cancel options is enough. You can also have a Logout button to logout of TGA. Both the class id and student id fields should be either lowercase or uppercase only, not mixed case. In the system the class id and student id are not case sensitive. Uppercase only can be used to make it easier for young children to type the ids.</p>

<h4 id="login-ui-examples">Login UI examples</h4>

<table>
<tr>
    <td width="33%">
        <img src="images/integrations/unitycsharp/image6.png"/><br>
        Unity C# SDK built-in login UI
    </td>
    <td width="33%">
        <img src="images/integrations/general/image4.png"/><br>
        Switch & Glitch manual login
    </td>
    <td width="33%">
        <img src="images/integrations/general/image6.png"/><br>
        Switch & Glitch logged in via TeacherGaming app
    </td>
</tr>
</table>

<h2 id="save-games-user-profiles-and-tga-login">Save games, user profiles and tga login</h2>

<p>If your game has different user profiles for different players, you should tie each tga login to a different user profile. Even if you don’t have user profiles otherwise, it is advisable to tie player progress to TGA login.</p>

<p>Note that when resuming the game and switching profiles, you should log the current user out and switch the profile. This can happen for example when user changes logged in user in TeacherGaming App and launches your game again and your game was already running in the background.</p>

<h2 id="sending-events">Sending events</h2>

<p>The events that have been defined in TeacherGaming Desk website are automatically generated to the SDK and can be used to send data from the game to TeacherGaming Desk. In this document just a general overview with pseudocode is given. See the platform specific SDK documentation for more detailed information. You don’t need to check if the user is logged in to TGA before sending events. The SDK will automatically check inside the function calls for this.</p>

<h3 id="sending-events-with-duration">Sending events with duration</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Tracking an event with duration</span>
<span class="c1">// Level Start</span>
<span class="n">TGASDKSomeGame</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">LevelCompleted</span><span class="p">.</span><span class="nf">Start</span><span class="p">();</span>

<span class="c1">// Within level, when player gets score</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">SomeGame</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">LevelCompleted</span><span class="p">.</span><span class="n">Score</span> <span class="p">+=</span> <span class="m">1</span>

<span class="c1">// At the end of the level</span>
<span class="n">TGASDKSomeGame</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">LevelCompleted</span><span class="p">.</span><span class="nf">Send</span><span class="p">();</span>
</code></pre>
<p>Our SDK can automatically count time for an event and append duration to sent data. You can modify any additional data inside the event before you send it.
To start the event, call TGASDK.Event.&lt;EventName&gt;.Start().
You can gather all the needed data for the event before you send it using TGASDK.Event.&lt;EventName&gt;.Current.&lt;DataParameter&gt;
To send the event, call TGASDK.Event.&lt;EventName&gt;.Send()</p>

<h3 id="sending-events-without-duration">Sending events without duration</h3>
<pre class="highlight csharp tab-csharp"><code><span class="c1">// Sending an event without tracking for duration</span>
<span class="n">TGASDKSomeGame</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">ItemCrafted</span><span class="p">.</span><span class="nf">Send</span><span class="p">(</span><span class="s">"item1"</span><span class="p">);</span>
</code></pre>
<p>If the event is something for which it does not make sense to track a duration you can call TGASDK.Event.&lt;EventName&gt;.Send(&hellip;) with event data as parameters to send the event directly.</p>

<h2 id="updating-state">Updating state</h2>

<p>By default when user logs in, teacher will see in their dashboard state “Playing game” for that student. It is possible to update the state and detailed state for student for what they are currently doing in the game, like In main menu, Playing level 1, Playing Multiplayer, In Settings Menu. This allows teacher to see by glance in teacher dashboard what student is currently doing.</p>

<p>Updating state can be done using one of three function calls</p>

<ul>
<li>TGASDK.TGA.UpdateUserState(string state)

<ul>
<li>This sets the state showing below student name in teacher dashboard. It also resets detailed state showing below this state, if there was any.</li>
</ul></li>
<li>TGASDK.TGA.UpdateUserState(string state, string detailedState)

<ul>
<li>This sets the state showing below student name in teacher dashboard and detailed state below it.</li>
</ul></li>
<li>TGASDK.TGA.UpdateUserStateDetailedOnly(string stateDetailed)

<ul>
<li>This sets the detailed state below main state and does not reset the main state. You can use this to for example update round numbers or other live data happening in current state of your game.</li>
</ul></li>
</ul>

<p>You can keep the state update calls in your game and don’t need to check if user is logged in to TGA, we will automatically check inside the function calls if player is currently logged in to TGA and send the state update only if so.</p>

<h3 id="state-examples">State examples</h3>
<pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"In Main Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"In Settings Menu"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Singleplayer Game"</span><span class="p">,</span> <span class="s">"Tutorial Level 4"</span><span class="p">);</span>
</code></pre><pre class="highlight csharp tab-csharp"><code><span class="c1">// When game begun</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserState</span><span class="p">(</span><span class="s">"Playing Multiplayer Game"</span><span class="p">);</span>
<span class="c1">// When round changed</span>
<span class="n">TGASDK</span><span class="p">.</span><span class="n">TGA</span><span class="p">.</span><span class="nf">UpdateUserStateDetailedOnly</span><span class="p">(</span><span class="s">"Round 2"</span><span class="p">);</span>
</code></pre>
<table>
<tr>
    <td width="20%"> <img src="images/integrations/unitycsharp/image5.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image4.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image2.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image1.png"/> </td>
    <td width="20%"> <img src="images/integrations/unitycsharp/image3.png"/> </td>
</tr>
<tr>
    <td><small>Default state for logged-in student </small></td>
    <td><small>Student is in main menu </small></td>
    <td><small>Student is in settings menu</small></td>
    <td><small>Student is playing singleplayer game, Tutorial Level 4 has been passed for detailed state</small></td>
    <td><small>Student is playing multiplayer game, Round number is being passed to detailed state when round changes</small></td>
</tr>
</table>
